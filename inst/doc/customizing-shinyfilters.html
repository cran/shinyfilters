<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Customizing shinyfilters</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>
<style type="text/css">
.selectize-control.plugin-drag_drop.multi>.selectize-input.dragging{overflow:visible}.selectize-control.plugin-drag_drop.multi>.selectize-input>div.ui-sortable-placeholder{visibility:visible !important;background:#f2f2f2 !important;background:rgba(0,0,0,0.06) !important;border:0 none !important;box-shadow:inset 0 0 12px 4px #fff}.selectize-control.plugin-drag_drop .ui-sortable-placeholder::after{content:"!";visibility:hidden}.selectize-control.plugin-drag_drop .ui-sortable-helper{box-shadow:0 2px 5px rgba(0,0,0,0.2)}.selectize-dropdown.plugin-dropdown_header .selectize-dropdown-header{position:relative;padding:6px 12px;border-bottom:1px solid #d0d0d0;background:#f8f8f8;border-radius:4px 4px 0 0}.selectize-dropdown.plugin-dropdown_header .selectize-dropdown-header-close{position:absolute;right:12px;top:50%;color:#333;opacity:.4;margin-top:-12px;line-height:20px;font-size:20px !important;text-decoration:none}.selectize-dropdown.plugin-dropdown_header .selectize-dropdown-header-close:hover{color:black}.selectize-dropdown.plugin-optgroup_columns .selectize-dropdown-content{display:flex}.selectize-dropdown.plugin-optgroup_columns .optgroup{border-right:1px solid #f2f2f2;border-top:0 none;flex-grow:1;flex-basis:0;min-width:0}.selectize-dropdown.plugin-optgroup_columns .optgroup:last-child{border-right:0 none}.selectize-dropdown.plugin-optgroup_columns .optgroup:before{display:none}.selectize-dropdown.plugin-optgroup_columns .optgroup-header{border-top:0 none}.selectize-control.plugin-remove_button .item{display:inline-flex;align-items:center;padding-right:0 !important}.selectize-control.plugin-remove_button .item .remove{color:inherit;text-decoration:none;vertical-align:middle;display:inline-block;padding:1px 5px;border-left:1px solid rgba(0,0,0,0);border-radius:0 2px 2px 0;box-sizing:border-box;margin-left:5px}.selectize-control.plugin-remove_button .item .remove:hover{background:rgba(0,0,0,0.05)}.selectize-control.plugin-remove_button .item.active .remove{border-left-color:rgba(0,0,0,0)}.selectize-control.plugin-remove_button .disabled .item .remove:hover{background:0}.selectize-control.plugin-remove_button .disabled .item .remove{border-left-color:rgba(77,77,77,0)}.selectize-control.plugin-clear_button .clear{text-decoration:none;display:flex;position:absolute;height:100%;width:25px;top:0;right:calc(12px - 5px);color:#000;opacity:.4;font-weight:bold;border:0;cursor:pointer;z-index:1;font-size:21px;justify-content:center;align-items:center}.selectize-control.plugin-clear_button .clear:hover{opacity:1}.selectize-control.plugin-clear_button.single .clear{right:calc(12px - 5px + 1.5rem)}.selectize-dropdown.plugin-auto_position.selectize-position-top{border-top:1px solid #d0d0d0;border-bottom:0 none;border-radius:3px 3px 0 0;box-shadow:0 -6px 12px rgba(0,0,0,0.18)}.selectize-control.plugin-auto_position .selectize-input.selectize-position-top.dropdown-active{border-radius:0 0 3px 3px;border-top:0 none}.selectize-control.plugin-auto_position .selectize-input.selectize-position-top.dropdown-active::before{top:0;bottom:unset}.selectize-control{position:relative}.selectize-dropdown,.selectize-input,.selectize-input input{color:#333;font-family:inherit;font-size:inherit;line-height:20px;font-smoothing:inherit}.selectize-input,.selectize-control.single .selectize-input.input-active{background:#fff;cursor:text;display:inline-block}.selectize-input{border:1px solid #ccc;padding:6px 12px;display:inline-block;width:100%;position:relative;z-index:1;box-sizing:border-box;box-shadow:none;border-radius:4px}.selectize-control.multi .selectize-input.has-items{padding:calc(6px - 1px - 0px) 12px calc(6px - 1px - 3px - 0px)}.selectize-input.full{background-color:#fff}.selectize-input.disabled,.selectize-input.disabled *{cursor:default !important}.selectize-input.focus{box-shadow:inset 0 1px 2px rgba(0,0,0,0.15)}.selectize-input.dropdown-active{border-radius:4px 4px 0 0}.selectize-input>*{vertical-align:baseline;display:inline-block;zoom:1}.selectize-control.multi .selectize-input>div{cursor:pointer;margin:0 3px 3px 0;padding:1px 5px;background:#efefef;color:#333;border:0 solid rgba(0,0,0,0)}.selectize-control.multi .selectize-input>div.active{background:#337ab7;color:#fff;border:0 solid rgba(0,0,0,0)}.selectize-control.multi .selectize-input.disabled>div,.selectize-control.multi .selectize-input.disabled>div.active{color:gray;background:white;border:0 solid rgba(77,77,77,0)}.selectize-input>input{display:inline-block !important;padding:0 !important;min-height:0 !important;max-height:none !important;max-width:100% !important;margin:0 !important;text-indent:0 !important;border:0 none !important;background:none !important;line-height:inherit !important;user-select:auto !important;box-shadow:none !important}.selectize-input>input::-ms-clear{display:none}.selectize-input>input:focus{outline:none !important}.selectize-input>input[placeholder]{box-sizing:initial}.selectize-input.has-items>input{margin:0 0 !important}.selectize-input::after{content:" ";display:block;clear:left}.selectize-input.dropdown-active::before{content:" ";display:block;position:absolute;background:#d6d6d6;height:1px;bottom:0;left:0;right:0}.selectize-dropdown{position:absolute;top:100%;left:0;width:100%;z-index:10;border:1px solid #d0d0d0;background:#fff;margin:-1px 0 0 0;border-top:0 none;box-sizing:border-box;box-shadow:0 1px 3px rgba(0,0,0,0.1);border-radius:0 0 4px 4px}.selectize-dropdown [data-selectable]{cursor:pointer;overflow:hidden}.selectize-dropdown [data-selectable] .highlight{background:rgba(255,237,40,0.4);border-radius:1px}.selectize-dropdown .option,.selectize-dropdown .optgroup-header,.selectize-dropdown .no-results,.selectize-dropdown .create{padding:3px 12px}.selectize-dropdown .option,.selectize-dropdown [data-disabled],.selectize-dropdown [data-disabled] [data-selectable].option{cursor:inherit;opacity:.5}.selectize-dropdown [data-selectable].option{opacity:1;cursor:pointer}.selectize-dropdown .optgroup:first-child .optgroup-header{border-top:0 none}.selectize-dropdown .optgroup-header{color:#777;background:#fff;cursor:default}.selectize-dropdown .active{background-color:#337ab7;color:#fff}.selectize-dropdown .active.create{color:#262626}.selectize-dropdown .selected{background-color:#337ab7;color:#fff}.selectize-dropdown .create{color:rgba(51,51,51,0.5)}.selectize-dropdown .active:not(.selected){background:#f5f5f5;color:#262626}.selectize-dropdown-content{overflow-y:auto;overflow-x:hidden;max-height:200px;overflow-scrolling:touch}.selectize-dropdown-emptyoptionlabel{text-align:center}.selectize-dropdown .spinner{display:inline-block;width:30px;height:30px;margin:3px 12px}.selectize-dropdown .spinner:after{content:" ";display:block;width:24px;height:24px;margin:3px;border-radius:50%;border:5px solid #d0d0d0;border-color:#d0d0d0 transparent #d0d0d0 transparent;animation:lds-dual-ring 1.2s linear infinite}@keyframes lds-dual-ring{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.selectize-control.single .selectize-input,.selectize-control.single .selectize-input input{cursor:pointer}.selectize-control.single .selectize-input.input-active,.selectize-control.single .selectize-input.input-active input:not(:read-only){cursor:text}.selectize-control.single .selectize-input:not(.no-arrow):after{content:" ";display:block;position:absolute;top:50%;right:17px;margin-top:-3px;width:0;height:0;border-style:solid;border-width:5px 5px 0 5px;border-color:#333 transparent transparent transparent}.selectize-control.single .selectize-input:not(.no-arrow).dropdown-active:after{margin-top:-4px;border-width:0 5px 5px 5px;border-color:transparent transparent #333 transparent}.selectize-control.rtl{text-align:right}.selectize-control.rtl.single .selectize-input:after{left:17px;right:auto}.selectize-control.rtl .selectize-input>input{margin:0 4px 0 -2px !important}.selectize-control .selectize-input.disabled{opacity:.5;background-color:#fff}.selectize-dropdown,.selectize-dropdown.form-control{height:auto;padding:0;margin:2px 0 0 0;z-index:1000;background:#fff;border:1px solid #ccc;border:1px solid rgba(0,0,0,0.15);border-radius:4px;box-shadow:0 6px 12px rgba(0,0,0,0.175)}.selectize-dropdown .optgroup-header{font-size:12px;line-height:1.428571429}.selectize-dropdown .optgroup:first-child:before{display:none}.selectize-dropdown .optgroup:before{content:" ";display:block;height:1px;margin:9px 0;overflow:hidden;background-color:#e5e5e5;margin-left:-12px;margin-right:-12px}.selectize-dropdown-content{padding:5px 0}.selectize-dropdown-emptyoptionlabel{text-align:center}.selectize-input{min-height:34px}.selectize-input.dropdown-active{border-radius:4px}.selectize-input.dropdown-active::before{display:none}.selectize-input.focus{border-color:#66afe9;outline:0;box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 8px rgba(102,175,233,0.6)}.has-error .selectize-input{border-color:#a94442;box-shadow:inset 0 1px 1px rgba(0,0,0,0.075)}.has-error .selectize-input:focus{border-color:#843534;box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #ce8483}.selectize-control.multi .selectize-input.has-items{padding-left:7px;padding-right:7px}.selectize-control.multi .selectize-input>div{border-radius:3px}.form-control.selectize-control{padding:0;height:auto;border:0;background:0;box-shadow:none;border-radius:0}.selectize-dropdown.plugin-auto_position.selectize-position-top{border-top:1px solid #d0d0d0;border-bottom:0 none;border-radius:3px 3px 0 0;box-shadow:0 -6px 12px rgba(0,0,0,0.18)}.selectize-control.plugin-auto_position .selectize-input.selectize-position-top.dropdown-active{border-radius:0 0 3px 3px;border-top:0 none}.selectize-control.plugin-auto_position .selectize-input.selectize-position-top.dropdown-active::before{top:0;bottom:unset}.selectize-control.plugin-clear_button .clear{text-decoration:none;display:flex;position:absolute;height:100%;width:25px;top:0;right:calc(12px - 5px);color:#000;opacity:.4;font-weight:bold;border:0;cursor:pointer;z-index:1;font-size:21px;justify-content:center;align-items:center}.selectize-control.plugin-clear_button .clear:hover{opacity:1}.selectize-control.plugin-clear_button.single .clear{right:calc(12px - 5px + 1.5rem)}.selectize-control.plugin-drag_drop.multi>.selectize-input.dragging{overflow:visible}.selectize-control.plugin-drag_drop.multi>.selectize-input>div.ui-sortable-placeholder{visibility:visible !important;background:#f2f2f2 !important;background:rgba(0,0,0,0.06) !important;border:0 none !important;box-shadow:inset 0 0 12px 4px #fff}.selectize-control.plugin-drag_drop .ui-sortable-placeholder::after{content:"!";visibility:hidden}.selectize-control.plugin-drag_drop .ui-sortable-helper{box-shadow:0 2px 5px rgba(0,0,0,0.2)}.selectize-dropdown.plugin-dropdown_header .selectize-dropdown-header{position:relative;padding:6px 12px;border-bottom:1px solid #d0d0d0;background:#f8f8f8;border-radius:4px 4px 0 0}.selectize-dropdown.plugin-dropdown_header .selectize-dropdown-header-close{position:absolute;right:12px;top:50%;color:#333;opacity:.4;margin-top:-12px;line-height:20px;font-size:20px !important;text-decoration:none}.selectize-dropdown.plugin-dropdown_header .selectize-dropdown-header-close:hover{color:black}.selectize-dropdown.plugin-optgroup_columns .selectize-dropdown-content{display:flex}.selectize-dropdown.plugin-optgroup_columns .optgroup{border-right:1px solid #f2f2f2;border-top:0 none;flex-grow:1;flex-basis:0;min-width:0}.selectize-dropdown.plugin-optgroup_columns .optgroup:last-child{border-right:0 none}.selectize-dropdown.plugin-optgroup_columns .optgroup:before{display:none}.selectize-dropdown.plugin-optgroup_columns .optgroup-header{border-top:0 none}.selectize-control.plugin-remove_button .item{display:inline-flex;align-items:center;padding-right:0 !important}.selectize-control.plugin-remove_button .item .remove{color:inherit;text-decoration:none;vertical-align:middle;display:inline-block;padding:1px 5px;border-left:1px solid rgba(0,0,0,0);border-radius:0 2px 2px 0;box-sizing:border-box;margin-left:5px}.selectize-control.plugin-remove_button .item .remove:hover{background:rgba(0,0,0,0.05)}.selectize-control.plugin-remove_button .item.active .remove{border-left-color:rgba(0,0,0,0)}.selectize-control.plugin-remove_button .disabled .item .remove:hover{background:0}.selectize-control.plugin-remove_button .disabled .item .remove{border-left-color:rgba(77,77,77,0)}</style>
<script>(function(d,k){typeof define=="function"&&define.amd?define(["jquery"],k):typeof module=="object"&&typeof module.exports=="object"?module.exports=k(require("jquery")):d.Selectize=k(d.jQuery)})(this,function(d){"use strict";var k=function(e,t){if(!(typeof t=="string"&&!t.length)){var i=typeof t=="string"?new RegExp(t,"i"):t,n=function(r){var s=0;if(r.nodeType===3){var o=r.data.search(i);if(o>=0&&r.data.length>0){var a=r.data.match(i),l=document.createElement("span");l.className="highlight";var c=r.splitText(o),u=c.splitText(a[0].length),f=c.cloneNode(!0);l.appendChild(f),c.parentNode.replaceChild(l,c),s=1}}else if(r.nodeType===1&&r.childNodes&&!/(script|style)/i.test(r.tagName)&&(r.className!=="highlight"||r.tagName!=="SPAN"))for(var h=0;h<r.childNodes.length;++h)h+=n(r.childNodes[h]);return s};return e.each(function(){n(this)})}};d.fn.removeHighlight=function(){return this.find("span.highlight").each(function(){this.parentNode.firstChild.nodeName;var e=this.parentNode;e.replaceChild(this.firstChild,this),e.normalize()}).end()};var N=function(){};N.prototype={on:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},off:function(e,t){var i=arguments.length;if(i===0)return delete this._events;if(i===1)return delete this._events[e];this._events=this._events||{},e in this._events&&this._events[e].splice(this._events[e].indexOf(t),1)},trigger:function(e){const t=this._events=this._events||{};if(e in t)for(var i=0;i<t[e].length;i++)t[e][i].apply(this,Array.prototype.slice.call(arguments,1))}},N.mixin=function(e){for(var t=["on","off","trigger"],i=0;i<t.length;i++)e.prototype[t[i]]=N.prototype[t[i]]};var Y={};Y.mixin=function(e){e.plugins={},e.prototype.initializePlugins=function(t){var i,n,r,s=this,o=[];if(s.plugins={names:[],settings:{},requested:{},loaded:{}},we(t))for(i=0,n=t.length;i<n;i++)typeof t[i]=="string"?o.push(t[i]):(s.plugins.settings[t[i].name]=t[i].options,o.push(t[i].name));else if(t)for(r in t)t.hasOwnProperty(r)&&(s.plugins.settings[r]=t[r],o.push(r));for(;o.length;)s.require(o.shift())},e.prototype.loadPlugin=function(t){var i=this,n=i.plugins,r=e.plugins[t];if(!e.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');n.requested[t]=!0,n.loaded[t]=r.fn.apply(i,[i.plugins.settings[t]||{}]),n.names.push(t)},e.prototype.require=function(t){var i=this,n=i.plugins;if(!i.plugins.loaded.hasOwnProperty(t)){if(n.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');i.loadPlugin(t)}return n.loaded[t]},e.define=function(t,i){e.plugins[t]={name:t,fn:i}}};const G=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,i)=>t+=(i&=63)<36?i.toString(36):i<62?(i-26).toString(36).toUpperCase():i>62?"-":"_","");var A=function(e,t){this.items=e,this.settings=t||{diacritics:!0}};A.prototype.tokenize=function(e,t){if(e=se(String(e||"").toLowerCase()),!e||!e.length)return[];var i,n,r,s,o=[],a=e.split(/ +/);for(i=0,n=a.length;i<n;i++){if(r=oe(a[i]),this.settings.diacritics)for(s in D)D.hasOwnProperty(s)&&(r=r.replace(new RegExp(s,"g"),D[s]));t&&(r="\\b"+r),o.push({string:a[i],regex:new RegExp(r,"i")})}return o},A.prototype.iterator=function(e,t){var i;H(e)?i=Array.prototype.forEach||function(n){for(var r=0,s=this.length;r<s;r++)n(this[r],r,this)}:i=function(n){for(var r in this)this.hasOwnProperty(r)&&n(this[r],r,this)},i.apply(e,[t])},A.prototype.getScoreFunction=function(e,t){var i,n,r,s,o;i=this,e=i.prepareSearch(e,t),r=e.tokens,n=e.options.fields,s=r.length,o=e.options.nesting;var a=function(c,u){var f,h;return!c||(c=String(c||""),h=c.search(u.regex),h===-1)?0:(f=u.string.length/c.length,h===0&&(f+=.5),f)},l=function(){var c=n.length;return c?c===1?function(u,f){return a(W(f,n[0],o),u)}:function(u,f){for(var h=0,g=0;h<c;h++)g+=a(W(f,n[h],o),u);return g/c}:function(){return 0}}();return s?s===1?function(c){return l(r[0],c)}:e.options.conjunction==="and"?function(c){for(var u,f=0,h=0;f<s;f++){if(u=l(r[f],c),u<=0)return 0;h+=u}return h/s}:function(c){for(var u=0,f=0;u<s;u++)f+=l(r[u],c);return f/s}:function(){return 0}},A.prototype.getSortFunction=function(e,t){var i,n,r,s,o,a,l,c,u,f,h;if(r=this,e=r.prepareSearch(e,t),h=!e.query&&t.sort_empty||t.sort,u=function(g,v){return g==="$score"?v.score:W(r.items[v.id],g,t.nesting)},o=[],h)for(i=0,n=h.length;i<n;i++)(e.query||h[i].field!=="$score")&&o.push(h[i]);if(e.query){for(f=!0,i=0,n=o.length;i<n;i++)if(o[i].field==="$score"){f=!1;break}f&&o.unshift({field:"$score",direction:"desc"})}else for(i=0,n=o.length;i<n;i++)if(o[i].field==="$score"){o.splice(i,1);break}for(c=[],i=0,n=o.length;i<n;i++)c.push(o[i].direction==="desc"?-1:1);return a=o.length,a?a===1?(s=o[0].field,l=c[0],function(g,v){return l*Q(u(s,g),u(s,v))}):function(g,v){var y,O,p,x,_;for(y=0;y<a;y++)if(_=o[y].field,O=c[y]*Q(u(_,g),u(_,v)),O)return O;return 0}:null},A.prototype.prepareSearch=function(e,t){if(typeof e=="object")return e;t=re({},t);var i=t.fields,n=t.sort,r=t.sort_empty;return i&&!H(i)&&(t.fields=[i]),n&&!H(n)&&(t.sort=[n]),r&&!H(r)&&(t.sort_empty=[r]),{options:t,query:String(e||"").toLowerCase(),tokens:this.tokenize(e,t.respect_word_boundaries),total:0,items:[]}},A.prototype.search=function(e,t){var i=this,n,r,s,o,a,l;return s=this.prepareSearch(e,t),t=s.options,e=s.query,l=t.score||i.getScoreFunction(s),e.length?i.iterator(i.items,function(c,u){r=l(c),(t.filter===!1||r>0)&&s.items.push({score:r,id:u})}):i.iterator(i.items,function(c,u){s.items.push({score:1,id:u})}),a=i.getSortFunction(s,t),a&&s.items.sort(a),s.total=s.items.length,typeof t.limit=="number"&&(s.items=s.items.slice(0,t.limit)),s};var Q=function(e,t){return typeof e=="number"&&typeof t=="number"?e>t?1:e<t?-1:0:(e=U(String(e||"")),t=U(String(t||"")),e>t?1:t>e?-1:0)},re=function(e,t){var i,n,r,s;for(i=1,n=arguments.length;i<n;i++)if(s=arguments[i],!!s)for(r in s)s.hasOwnProperty(r)&&(e[r]=s[r]);return e},W=function(e,t,i){if(!(!e||!t)){if(!i)return e[t];for(var n=t.split(".");n.length&&(e=e[n.shift()]););return e}},se=function(e){return(e+"").replace(/^\s+|\s+$|/g,"")},oe=function(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},H=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},D={a:"[a\u1E00\u1E01\u0102\u0103\xC2\xE2\u01CD\u01CE\u023A\u2C65\u0226\u0227\u1EA0\u1EA1\xC4\xE4\xC0\xE0\xC1\xE1\u0100\u0101\xC3\xE3\xC5\xE5\u0105\u0104\xC3\u0105\u0104]",b:"[b\u2422\u03B2\u0392B\u0E3F\u{10301}\u16D2]",c:"[c\u0106\u0107\u0108\u0109\u010C\u010D\u010A\u010BC\u0304c\u0304\xC7\xE7\u1E08\u1E09\u023B\u023C\u0187\u0188\u0255\u1D04\uFF23\uFF43]",d:"[d\u010E\u010F\u1E0A\u1E0B\u1E10\u1E11\u1E0C\u1E0D\u1E12\u1E13\u1E0E\u1E0F\u0110\u0111D\u0326d\u0326\u0189\u0256\u018A\u0257\u018B\u018C\u1D6D\u1D81\u1D91\u0221\u1D05\uFF24\uFF44\xF0]",e:"[e\xC9\xE9\xC8\xE8\xCA\xEA\u1E18\u1E19\u011A\u011B\u0114\u0115\u1EBC\u1EBD\u1E1A\u1E1B\u1EBA\u1EBB\u0116\u0117\xCB\xEB\u0112\u0113\u0228\u0229\u0118\u0119\u1D92\u0246\u0247\u0204\u0205\u1EBE\u1EBF\u1EC0\u1EC1\u1EC4\u1EC5\u1EC2\u1EC3\u1E1C\u1E1D\u1E16\u1E17\u1E14\u1E15\u0206\u0207\u1EB8\u1EB9\u1EC6\u1EC7\u2C78\u1D07\uFF25\uFF45\u0258\u01DD\u018F\u0190\u03B5]",f:"[f\u0191\u0192\u1E1E\u1E1F]",g:"[g\u0262\u20B2\u01E4\u01E5\u011C\u011D\u011E\u011F\u0122\u0123\u0193\u0260\u0120\u0121]",h:"[h\u0124\u0125\u0126\u0127\u1E28\u1E29\u1E96\u1E96\u1E24\u1E25\u1E22\u1E23\u0266\u02B0\u01F6\u0195]",i:"[i\xCD\xED\xCC\xEC\u012C\u012D\xCE\xEE\u01CF\u01D0\xCF\xEF\u1E2E\u1E2F\u0128\u0129\u012E\u012F\u012A\u012B\u1EC8\u1EC9\u0208\u0209\u020A\u020B\u1ECA\u1ECB\u1E2C\u1E2D\u0197\u0268\u0268\u0306\u1D7B\u1D96\u0130iI\u0131\u026A\uFF29\uFF49]",j:"[j\u0237\u0134\u0135\u0248\u0249\u029D\u025F\u02B2]",k:"[k\u0198\u0199\uA740\uA741\u1E30\u1E31\u01E8\u01E9\u1E32\u1E33\u1E34\u1E35\u03BA\u03F0\u20AD]",l:"[l\u0141\u0142\u013D\u013E\u013B\u013C\u0139\u013A\u1E36\u1E37\u1E38\u1E39\u1E3C\u1E3D\u1E3A\u1E3B\u013F\u0140\u023D\u019A\u2C60\u2C61\u2C62\u026B\u026C\u1D85\u026D\u0234\u029F\uFF2C\uFF4C]",n:"[n\u0143\u0144\u01F8\u01F9\u0147\u0148\xD1\xF1\u1E44\u1E45\u0145\u0146\u1E46\u1E47\u1E4A\u1E4B\u1E48\u1E49N\u0308n\u0308\u019D\u0272\u0220\u019E\u1D70\u1D87\u0273\u0235\u0274\uFF2E\uFF4E\u014A\u014B]",o:"[o\xD8\xF8\xD6\xF6\xD3\xF3\xD2\xF2\xD4\xF4\u01D1\u01D2\u0150\u0151\u014E\u014F\u022E\u022F\u1ECC\u1ECD\u019F\u0275\u01A0\u01A1\u1ECE\u1ECF\u014C\u014D\xD5\xF5\u01EA\u01EB\u020C\u020D\u0555\u0585]",p:"[p\u1E54\u1E55\u1E56\u1E57\u2C63\u1D7D\u01A4\u01A5\u1D71]",q:"[q\uA756\uA757\u02A0\u024A\u024B\uA758\uA759q\u0303]",r:"[r\u0154\u0155\u024C\u024D\u0158\u0159\u0156\u0157\u1E58\u1E59\u0210\u0211\u0212\u0213\u1E5A\u1E5B\u2C64\u027D]",s:"[s\u015A\u015B\u1E60\u1E61\u1E62\u1E63\uA7A8\uA7A9\u015C\u015D\u0160\u0161\u015E\u015F\u0218\u0219S\u0308s\u0308]",t:"[t\u0164\u0165\u1E6A\u1E6B\u0162\u0163\u1E6C\u1E6D\u01AE\u0288\u021A\u021B\u1E70\u1E71\u1E6E\u1E6F\u01AC\u01AD]",u:"[u\u016C\u016D\u0244\u0289\u1EE4\u1EE5\xDC\xFC\xDA\xFA\xD9\xF9\xDB\xFB\u01D3\u01D4\u0170\u0171\u016C\u016D\u01AF\u01B0\u1EE6\u1EE7\u016A\u016B\u0168\u0169\u0172\u0173\u0214\u0215\u222A]",v:"[v\u1E7C\u1E7D\u1E7E\u1E7F\u01B2\u028B\uA75E\uA75F\u2C71\u028B]",w:"[w\u1E82\u1E83\u1E80\u1E81\u0174\u0175\u1E84\u1E85\u1E86\u1E87\u1E88\u1E89]",x:"[x\u1E8C\u1E8D\u1E8A\u1E8B\u03C7]",y:"[y\xDD\xFD\u1EF2\u1EF3\u0176\u0177\u0178\xFF\u1EF8\u1EF9\u1E8E\u1E8F\u1EF4\u1EF5\u024E\u024F\u01B3\u01B4]",z:"[z\u0179\u017A\u1E90\u1E91\u017D\u017E\u017B\u017C\u1E92\u1E93\u1E94\u1E95\u01B5\u01B6]"},U=function(){var e,t,i,n,r="",s={};for(i in D)if(D.hasOwnProperty(i))for(n=D[i].substring(2,D[i].length-1),r+=n,e=0,t=n.length;e<t;e++)s[n.charAt(e)]=i;var o=new RegExp("["+r+"]","g");return function(a){return a.replace(o,function(l){return s[l]}).toLowerCase()}}(),P=ne("macOS",/Mac/),ae=65,Se=188,le=13,ue=27,B=37,ce=38,pe=80,J=39,de=40,fe=78,z=8,q=46,he=16,ge=P?91:17,ve=P?18:17,X=9,K=1,me=2,Z=!ne("Android",/android/i)&&!!document.createElement("input").validity,ee=function(e){return typeof e!="undefined"},we=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},F=function(e){return typeof e=="undefined"||e===null?null:typeof e=="boolean"?e?"1":"0":e+""},T=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},Ie=function(e){return(e+"").replace(/\$/g,"$$$$")},L={};L.before=function(e,t,i){var n=e[t];e[t]=function(){return i.apply(e,arguments),n.apply(e,arguments)}},L.after=function(e,t,i){var n=e[t];e[t]=function(){var r=n.apply(e,arguments);return i.apply(e,arguments),r}};var ye=function(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}},Oe=function(e,t){var i;return function(){var n=this,r=arguments;window.clearTimeout(i),i=window.setTimeout(function(){e.apply(n,r)},t)}},te=function(e,t,i){var n,r=e.trigger,s={};e.trigger=function(){var o=arguments[0];if(t.indexOf(o)!==-1)s[o]=arguments;else return r.apply(e,arguments)},i.apply(e,[]),e.trigger=r;for(n in s)s.hasOwnProperty(n)&&r.apply(e,s[n])},be=function(e,t,i,n){e.on(t,i,function(r){for(var s=r.target;s&&s.parentNode!==e[0];)s=s.parentNode;return r.currentTarget=s,n.apply(this,[r])})},R=function(e){var t={};if(e===void 0)return console.warn("WARN getInputSelection cannot locate input control"),t;if("selectionStart"in e)t.start=e.selectionStart,t.length=e.selectionEnd-t.start;else if(document.selection){e.focus();var i=document.selection.createRange(),n=document.selection.createRange().text.length;i.moveStart("character",-e.value.length),t.start=i.text.length-n,t.length=n}return t},_e=function(e,t,i){var n,r,s={};if(i)for(n=0,r=i.length;n<r;n++)s[i[n]]=e.css(i[n]);else s=e.css();t.css(s)},ie=function(e,t){return e?(w.$testInput||(w.$testInput=d("<span />").css({position:"absolute",width:"auto",padding:0,whiteSpace:"pre"}),d("<div />").css({position:"absolute",width:0,height:0,overflow:"hidden"}).attr({"aria-hidden":!0}).append(w.$testInput).appendTo("body")),w.$testInput.text(e),_e(t,w.$testInput,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]),w.$testInput.width()):0},Ce=function(e){var t=null,i=function(n,r){var s,o,a,g,l,c,u,f,h;if(n=n||window.event||{},r=r||{},!(n.metaKey||n.altKey)&&!(!r.force&&e.data("grow")===!1)){s=e.val(),n.type&&n.type.toLowerCase()==="keydown"&&(o=n.keyCode,a=o>=48&&o<=57||o>=65&&o<=90||o>=96&&o<=111||o>=186&&o<=222||o===32,o===q||o===z?(h=R(e[0]),h.length?s=s.substring(0,h.start)+s.substring(h.start+h.length):o===z&&h.start?s=s.substring(0,h.start-1)+s.substring(h.start+1):o===q&&typeof h.start!="undefined"&&(s=s.substring(0,h.start)+s.substring(h.start+1))):a&&(u=n.shiftKey,f=String.fromCharCode(n.keyCode),u?f=f.toUpperCase():f=f.toLowerCase(),s+=f));var g=e.attr("readonly")?0:4;l=e.attr("placeholder"),l?c=ie(l,e)+g:c=0,g=Math.max(ie(s,e),c)+g,g!==t&&(t=g,e.width(g),e.triggerHandler("resize"))}};e.on("keydown keyup update blur",i),i()},$e=function(e){var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML},Fe=function(e,t){t||(t={});var i="Selectize";console.error(i+": "+e),t.explanation&&(console.group&&console.group(),console.error(t.explanation),console.group&&console.groupEnd())},xe=function(e){try{JSON.parse(e)}catch(t){return!1}return!0};function ne(e,t){return navigator.userAgentData?e===navigator.userAgentData.platform:t.test(navigator.userAgent)}var w=function(e,t){var i,n,r,s,o,a=this;o=e[0],o.selectize=a;var l=window.getComputedStyle&&window.getComputedStyle(o,null);if(s=l?l.getPropertyValue("direction"):o.currentStyle&&o.currentStyle.direction,s=s||e.parents("[dir]:first").attr("dir")||"",a.settings={},++w.count,d.extend(a,{order:0,settings:t,$input:e,tabIndex:e.attr("tabindex")||"",tagType:o.tagName.toLowerCase()==="select"?K:me,rtl:/rtl/i.test(s),eventNS:".selectize-"+new Date().getTime()+"-"+Math.random().toString(36).substr(2,5),highlightedValue:null,isBlurring:!1,isOpen:!1,isDisabled:!1,isRequired:e.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",lastValidValue:"",lastOpenTarget:!1,caretPos:0,loading:0,loadedSearches:{},isDropdownClosing:!1,$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:t.loadThrottle===null?a.onSearchChange:Oe(a.onSearchChange,t.loadThrottle)}),a.sifter=new A(this.options,{diacritics:t.diacritics}),a.settings.options){for(n=0,r=a.settings.options.length;n<r;n++)a.registerOption(a.settings.options[n]);delete a.settings.options}if(a.settings.optgroups){for(n=0,r=a.settings.optgroups.length;n<r;n++)a.registerOptionGroup(a.settings.optgroups[n]);delete a.settings.optgroups}a.settings.mode=a.settings.mode||(a.settings.maxItems===1?"single":"multi"),typeof a.settings.hideSelected!="boolean"&&(a.settings.hideSelected=a.settings.mode==="multi"),a.initializePlugins(a.settings.plugins),a.setupCallbacks(),a.setupTemplates(),a.setup()};return N.mixin(w),Y.mixin(w),d.extend(w.prototype,{setup:function(){var e=this,t=e.settings,i=e.eventNS,n=d(window),r=d(document),s=e.$input,o,a,l,c,u,f,h,g,v,y,O,p,x;if(h=e.settings.mode,y=s.attr("class")||"",x=t.showArrow?"":" no-arrow",o=d("<div>").addClass(t.wrapperClass).addClass(y+" selectize-control").addClass(h),a=d("<div>").addClass(t.inputClass+x+" selectize-input items").appendTo(o),l=d('<input type="text" autocomplete="new-password" autofill="no" />').appendTo(a).attr("tabindex",s.is(":disabled")?"-1":e.tabIndex),f=d(t.dropdownParent||o),c=d("<div>").addClass(t.dropdownClass).addClass(h+" selectize-dropdown").hide().appendTo(f),u=d("<div>").addClass(t.dropdownContentClass+" selectize-dropdown-content").attr("tabindex","-1").appendTo(c),(p=s.attr("id"))&&(l.attr("id",p+"-selectized"),d("label[for='"+p+"']").attr("for",p+"-selectized")),e.settings.copyClassesToDropdown&&c.addClass(y),o.css({width:s[0].style.width}),e.plugins.names.length&&(O="plugin-"+e.plugins.names.join(" plugin-"),o.addClass(O),c.addClass(O)),(t.maxItems===null||t.maxItems>1)&&e.tagType===K&&s.attr("multiple","multiple"),e.settings.placeholder&&l.attr("placeholder",t.placeholder),e.settings.search||(l.attr("readonly",!0),l.attr("inputmode","none"),a.css("cursor","pointer")),!e.settings.splitOn&&e.settings.delimiter){var _=e.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");e.settings.splitOn=new RegExp("\\s*"+_+"+\\s*")}s.attr("autocorrect")&&l.attr("autocorrect",s.attr("autocorrect")),s.attr("autocapitalize")&&l.attr("autocapitalize",s.attr("autocapitalize")),s.is("input")&&(l[0].type=s[0].type),e.$wrapper=o,e.$control=a,e.$control_input=l,e.$dropdown=c,e.$dropdown_content=u,c.on("mouseenter mousedown mouseup click","[data-disabled]>[data-selectable]",function(m){m.stopImmediatePropagation()}),c.on("mouseenter","[data-selectable]",function(){return e.onOptionHover.apply(e,arguments)}),c.on("mouseup click","[data-selectable]",function(){return e.onOptionSelect.apply(e,arguments)}),be(a,"mouseup","*:not(input)",function(){return e.onItemSelect.apply(e,arguments)}),Ce(l),a.on({mousedown:function(){return e.onMouseDown.apply(e,arguments)},click:function(){return e.onClick.apply(e,arguments)}}),l.on({mousedown:function(m){(e.$control_input.val()!==""||e.settings.openOnFocus)&&m.stopPropagation()},keydown:function(){return e.onKeyDown.apply(e,arguments)},keypress:function(){return e.onKeyPress.apply(e,arguments)},input:function(){return e.onInput.apply(e,arguments)},resize:function(){e.positionDropdown.apply(e,[])},blur:function(){return e.onBlur.apply(e,arguments)},focus:function(){return e.onFocus.apply(e,arguments)},paste:function(){return e.onPaste.apply(e,arguments)}}),r.on("keydown"+i,function(m){e.isCmdDown=m[P?"metaKey":"ctrlKey"],e.isCtrlDown=m[P?"altKey":"ctrlKey"],e.isShiftDown=m.shiftKey}),r.on("keyup"+i,function(m){m.keyCode===ve&&(e.isCtrlDown=!1),m.keyCode===he&&(e.isShiftDown=!1),m.keyCode===ge&&(e.isCmdDown=!1)}),r.on("mousedown"+i,function(m){if(e.isFocused){if(m.target===e.$dropdown[0]||e.$dropdown.has(m.target).length)return!1;m.target!==e.$control[0]&&e.blur(m.target)}}),n.on(["scroll"+i,"resize"+i].join(" "),function(){e.isOpen&&e.positionDropdown.apply(e,arguments)}),n.on("mousemove"+i,function(){e.ignoreHover=e.settings.ignoreHover}),this.revertSettings={$children:s.children().detach(),tabindex:s.attr("tabindex")},s.attr("tabindex",-1).hide().after(e.$wrapper),Array.isArray(t.items)&&(e.lastValidValue=t.items,e.setValue(t.items),delete t.items),Z&&s.on("invalid"+i,function(m){m.preventDefault(),e.isInvalid=!0,e.refreshState()}),e.updateOriginalInput(),e.refreshItems(),e.refreshState(),e.updatePlaceholder(),e.isSetup=!0,s.is(":disabled")&&e.disable(),e.on("change",this.onChange),s.data("selectize",e),s.addClass("selectized"),e.trigger("initialize"),t.preload===!0&&e.onSearchChange("")},setupTemplates:function(){var e=this,t=e.settings.labelField,i=e.settings.valueField,n=e.settings.optgroupLabelField,r={optgroup:function(s){return'<div class="optgroup">'+s.html+"</div>"},optgroup_header:function(s,o){return'<div class="optgroup-header">'+o(s[n])+"</div>"},option:function(s,o){var a=s.classes?" "+s.classes:"";a+=s[i]===""?" selectize-dropdown-emptyoptionlabel":"";var l=s.styles?' style="'+s.styles+'"':"";return"<div"+l+' class="option'+a+'">'+o(s[t])+"</div>"},item:function(s,o){return'<div class="item">'+o(s[t])+"</div>"},option_create:function(s,o){return'<div class="create">Add <strong>'+o(s.input)+"</strong>&#x2026;</div>"}};e.settings.render=d.extend({},r,e.settings.render)},setupCallbacks:function(){var e,t,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur",dropdown_item_activate:"onDropdownItemActivate",dropdown_item_deactivate:"onDropdownItemDeactivate"};for(e in i)i.hasOwnProperty(e)&&(t=this.settings[i[e]],t&&this.on(e,t))},onClick:function(e){var t=this;t.isDropdownClosing||(!t.isFocused||!t.isOpen)&&(t.focus(),e.preventDefault())},onMouseDown:function(e){var t=this,i=e.isDefaultPrevented(),n=d(e.target);if(t.isFocused||i||window.setTimeout(function(){t.isOpen||t.focus()},0),n!==t.$control_input[0]||t.$control_input.val()==="")return t.settings.mode==="single"?t.isOpen?t.close():t.open():(i||t.setActiveItem(null),t.settings.openOnFocus||(t.isOpen&&n===t.lastOpenTarget?(t.close(),t.lastOpenTarget=!1):(t.isOpen||(t.refreshOptions(),t.open()),t.lastOpenTarget=n))),!1},onChange:function(){var e=this;e.getValue()!==""&&(e.lastValidValue=e.getValue()),this.$input.trigger("input"),this.$input.trigger("change")},onPaste:function(e){var t=this;if(t.isFull()||t.isInputHidden||t.isLocked){e.preventDefault();return}t.settings.splitOn&&setTimeout(function(){var i=t.$control_input.val();if(i.match(t.settings.splitOn))for(var n=i.trim().split(t.settings.splitOn),r=0,s=n.length;r<s;r++)t.createItem(n[r])},0)},onKeyPress:function(e){if(this.isLocked)return e&&e.preventDefault();var t=String.fromCharCode(e.keyCode||e.which);if(this.settings.create&&this.settings.mode==="multi"&&t===this.settings.delimiter)return this.createItem(),e.preventDefault(),!1},onKeyDown:function(e){var t=e.target===this.$control_input[0],i=this;if(i.isLocked){e.keyCode!==X&&e.preventDefault();return}switch(e.keyCode){case ae:if(i.isCmdDown){i.selectAll();return}break;case ue:i.isOpen&&(e.preventDefault(),e.stopPropagation(),i.close());return;case fe:if(!e.ctrlKey||e.altKey)break;case de:if(!i.isOpen&&i.hasOptions)i.open();else if(i.$activeOption){i.ignoreHover=!0;var n=i.getAdjacentOption(i.$activeOption,1);n.length&&i.setActiveOption(n,!0,!0)}e.preventDefault();return;case pe:if(!e.ctrlKey||e.altKey)break;case ce:if(i.$activeOption){i.ignoreHover=!0;var r=i.getAdjacentOption(i.$activeOption,-1);r.length&&i.setActiveOption(r,!0,!0)}e.preventDefault();return;case le:i.isOpen&&i.$activeOption&&(i.onOptionSelect({currentTarget:i.$activeOption}),e.preventDefault());return;case B:i.advanceSelection(-1,e);return;case J:i.advanceSelection(1,e);return;case X:i.settings.selectOnTab&&i.isOpen&&i.$activeOption&&(i.onOptionSelect({currentTarget:i.$activeOption}),i.isFull()||e.preventDefault()),i.settings.create&&i.createItem()&&i.settings.showAddOptionOnCreate&&e.preventDefault();return;case z:case q:i.deleteSelection(e);return}if((i.isFull()||i.isInputHidden)&&!(P?e.metaKey:e.ctrlKey)){e.preventDefault();return}},onInput:function(e){var t=this,i=t.$control_input.val()||"";t.lastValue!==i&&(t.lastValue=i,t.onSearchChange(i),t.refreshOptions(),t.trigger("type",i))},onSearchChange:function(e){var t=this,i=t.settings.load;i&&(t.loadedSearches.hasOwnProperty(e)||(t.loadedSearches[e]=!0,t.load(function(n){i.apply(t,[e,n])})))},onFocus:function(e){var t=this,i=t.isFocused;if(t.isDisabled)return t.blur(),e&&e.preventDefault(),!1;t.ignoreFocus||(t.isFocused=!0,t.settings.preload==="focus"&&t.onSearchChange(""),i||t.trigger("focus"),t.$activeItems.length||(t.showInput(),t.setActiveItem(null),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState())},onBlur:function(e,t){var i=this;if(i.isFocused&&(i.isFocused=!1,!i.ignoreFocus)){var n=function(){i.close(),i.setTextboxValue(""),i.setActiveItem(null),i.setActiveOption(null),i.setCaret(i.items.length),i.refreshState(),t&&t.focus&&t.focus(),i.isBlurring=!1,i.ignoreFocus=!1,i.trigger("blur")};i.isBlurring=!0,i.ignoreFocus=!0,i.settings.create&&i.settings.createOnBlur?i.createItem(null,!1,n):n()}},onOptionHover:function(e){this.ignoreHover||this.setActiveOption(e.currentTarget,!1)},onOptionSelect:function(e){var t,i,n,r=this;e.preventDefault&&(e.preventDefault(),e.stopPropagation()),i=d(e.currentTarget),i.hasClass("create")?r.createItem(null,function(){r.settings.closeAfterSelect&&r.close()}):(t=i.attr("data-value"),typeof t!="undefined"&&(r.lastQuery=null,r.setTextboxValue(""),r.addItem(t),r.settings.closeAfterSelect?r.close():!r.settings.hideSelected&&e.type&&/mouse/.test(e.type)&&r.setActiveOption(r.getOption(t))))},onItemSelect:function(e){var t=this;t.isLocked||t.settings.mode==="multi"&&(e.preventDefault(),t.setActiveItem(e.currentTarget,e))},load:function(e){var t=this,i=t.$wrapper.addClass(t.settings.loadingClass);t.loading++,e.apply(t,[function(n){t.loading=Math.max(t.loading-1,0),n&&n.length&&(t.addOption(n),t.refreshOptions(t.isFocused&&!t.isInputHidden)),t.loading||i.removeClass(t.settings.loadingClass),t.trigger("load",n)}])},getTextboxValue:function(){var e=this.$control_input;return e.val()},setTextboxValue:function(e){var t=this.$control_input,i=t.val()!==e;i&&(t.val(e).triggerHandler("update"),this.lastValue=e)},getValue:function(){return this.tagType===K&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(e,t){if((Array.isArray(e)?e:[e]).join("")!==this.items.join("")){var n=t?[]:["change"];te(this,n,function(){this.clear(t),this.addItems(e,t)})}},setMaxItems:function(e){e===0&&(e=null),this.settings.maxItems=e,this.settings.mode=this.settings.mode||(this.settings.maxItems===1?"single":"multi"),this.refreshState()},setActiveItem:function(e,t){var i=this,n,r,s,o,a,l,c,u;if(i.settings.mode!=="single"){if(e=d(e),!e.length){d(i.$activeItems).removeClass("active"),i.$activeItems=[],i.isFocused&&i.showInput();return}if(n=t&&t.type.toLowerCase(),n==="mousedown"&&i.isShiftDown&&i.$activeItems.length){for(u=i.$control.children(".active:last"),o=Array.prototype.indexOf.apply(i.$control[0].childNodes,[u[0]]),a=Array.prototype.indexOf.apply(i.$control[0].childNodes,[e[0]]),o>a&&(c=o,o=a,a=c),r=o;r<=a;r++)l=i.$control[0].childNodes[r],i.$activeItems.indexOf(l)===-1&&(d(l).addClass("active"),i.$activeItems.push(l));t.preventDefault()}else n==="mousedown"&&i.isCtrlDown||n==="keydown"&&this.isShiftDown?e.hasClass("active")?(s=i.$activeItems.indexOf(e[0]),i.$activeItems.splice(s,1),e.removeClass("active")):i.$activeItems.push(e.addClass("active")[0]):(d(i.$activeItems).removeClass("active"),i.$activeItems=[e.addClass("active")[0]]);i.hideInput(),this.isFocused||i.focus()}},setActiveOption:function(e,t,i){var n,r,s,o,a,l=this;l.$activeOption&&(l.$activeOption.removeClass("active"),l.trigger("dropdown_item_deactivate",l.$activeOption.attr("data-value"))),l.$activeOption=null,e=d(e),e.length&&(l.$activeOption=e.addClass("active"),l.isOpen&&l.trigger("dropdown_item_activate",l.$activeOption.attr("data-value")),(t||!ee(t))&&(n=l.$dropdown_content.height(),r=l.$activeOption.outerHeight(!0),t=l.$dropdown_content.scrollTop()||0,s=l.$activeOption.offset().top-l.$dropdown_content.offset().top+t,o=s,a=s-n+r,s+r>n+t?l.$dropdown_content.stop().animate({scrollTop:a},i?l.settings.scrollDuration:0):s<t&&l.$dropdown_content.stop().animate({scrollTop:o},i?l.settings.scrollDuration:0)))},selectAll:function(){var e=this;e.settings.mode!=="single"&&(e.$activeItems=Array.prototype.slice.apply(e.$control.children(":not(input)").addClass("active")),e.$activeItems.length&&(e.hideInput(),e.close()),e.focus())},hideInput:function(){var e=this;e.setTextboxValue(""),e.$control_input.css({opacity:0,position:"absolute",left:e.rtl?1e4:0}),e.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var e=this;return e.isDisabled||(e.ignoreFocus=!0,e.$control_input[0].focus(),window.setTimeout(function(){e.ignoreFocus=!1,e.onFocus()},0)),e},blur:function(e){return this.$control_input[0].blur(),this.onBlur(null,e),this},getScoreFunction:function(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())},getSearchOptions:function(){var e=this.settings,t=e.sortField;return typeof t=="string"&&(t=[{field:t}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t,nesting:e.nesting,filter:e.filter,respect_word_boundaries:e.respect_word_boundaries}},search:function(e){var t,i,n,r,s,o=this,a=o.settings,l=this.getSearchOptions();if(a.score&&(s=o.settings.score.apply(this,[e]),typeof s!="function"))throw new Error('Selectize "score" setting must be a function that returns a function');if(e!==o.lastQuery?(a.normalize&&(e=e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")),o.lastQuery=e,r=o.sifter.search(e,d.extend(l,{score:s})),o.currentResults=r):r=d.extend(!0,{},o.currentResults),a.hideSelected)for(t=r.items.length-1;t>=0;t--)o.items.indexOf(F(r.items[t].id))!==-1&&r.items.splice(t,1);return r},refreshOptions:function(e){var t,i,n,r,s,o,a,l,c,u,f,h,g,v,y,O;typeof e=="undefined"&&(e=!0);var p=this,x=p.$control_input.val().trim(),_=p.search(x),m=p.$dropdown_content,E=p.$activeOption&&F(p.$activeOption.attr("data-value"));for(r=_.items.length,typeof p.settings.maxOptions=="number"&&(r=Math.min(r,p.settings.maxOptions)),s={},o=[],t=0;t<r;t++)for(a=p.options[_.items[t].id],l=p.render("option",a),c=a[p.settings.optgroupField]||"",u=Array.isArray(c)?c:[c],i=0,n=u&&u.length;i<n;i++){if(c=u[i],!p.optgroups.hasOwnProperty(c)&&typeof p.settings.optionGroupRegister=="function"){var V;(V=p.settings.optionGroupRegister.apply(p,[c]))&&p.registerOptionGroup(V)}p.optgroups.hasOwnProperty(c)||(c=""),s.hasOwnProperty(c)||(s[c]=document.createDocumentFragment(),o.push(c)),s[c].appendChild(l)}for(this.settings.lockOptgroupOrder&&o.sort(function(j,b){var C=p.optgroups[j]&&p.optgroups[j].$order||0,S=p.optgroups[b]&&p.optgroups[b].$order||0;return C-S}),f=document.createDocumentFragment(),t=0,r=o.length;t<r;t++)c=o[t],p.optgroups.hasOwnProperty(c)&&s[c].childNodes.length?(h=document.createDocumentFragment(),h.appendChild(p.render("optgroup_header",p.optgroups[c])),h.appendChild(s[c]),f.appendChild(p.render("optgroup",d.extend({},p.optgroups[c],{html:$e(h),dom:h})))):f.appendChild(s[c]);if(m.html(f),p.settings.highlight&&(m.removeHighlight(),_.query.length&&_.tokens.length))for(t=0,r=_.tokens.length;t<r;t++)k(m,_.tokens[t].regex);if(!p.settings.hideSelected)for(p.$dropdown.find(".selected").removeClass("selected"),t=0,r=p.items.length;t<r;t++)p.getOption(p.items[t]).addClass("selected");p.settings.dropdownSize.sizeType!=="auto"&&p.isOpen&&p.setupDropdownHeight(),p.positionDropdown(),g=p.canCreate(x),g&&p.settings.showAddOptionOnCreate&&(m.prepend(p.render("option_create",{input:x})),O=d(m[0].childNodes[0])),p.hasOptions=_.items.length>0||g&&p.settings.showAddOptionOnCreate||p.settings.setFirstOptionActive,p.hasOptions?(_.items.length>0?(y=E&&p.getOption(E),_.query!==""&&p.settings.setFirstOptionActive?v=m.find("[data-selectable]:first"):_.query!==""&&y&&y.length?v=y:p.settings.mode==="single"&&p.items.length&&(v=p.getOption(p.items[0])),(!v||!v.length)&&(O&&!p.settings.addPrecedence?v=p.getAdjacentOption(O,1):v=m.find("[data-selectable]:first"))):v=O,p.setActiveOption(v),e&&!p.isOpen&&p.open()):(p.setActiveOption(null),e&&p.isOpen&&p.close())},addOption:function(e){var t,i,n,r=this;if(Array.isArray(e)){for(t=0,i=e.length;t<i;t++)r.addOption(e[t]);return}(n=r.registerOption(e))&&(r.userOptions[n]=!0,r.lastQuery=null,r.trigger("option_add",n,e))},registerOption:function(e){var t=F(e[this.settings.valueField]);return typeof t=="undefined"||t===null||this.options.hasOwnProperty(t)?!1:(e.$order=e.$order||++this.order,this.options[t]=e,t)},registerOptionGroup:function(e){var t=F(e[this.settings.optgroupValueField]);return t?(e.$order=e.$order||++this.order,this.optgroups[t]=e,t):!1},addOptionGroup:function(e,t){t[this.settings.optgroupValueField]=e,(e=this.registerOptionGroup(t))&&this.trigger("optgroup_add",e,t)},removeOptionGroup:function(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.renderCache={},this.trigger("optgroup_remove",e))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(e,t){var i=this,n,r,s,o,a,l,c;if(e=F(e),s=F(t[i.settings.valueField]),e!==null&&i.options.hasOwnProperty(e)){if(typeof s!="string")throw new Error("Value must be set in option data");c=i.options[e].$order,s!==e&&(delete i.options[e],o=i.items.indexOf(e),o!==-1&&i.items.splice(o,1,s)),t.$order=t.$order||c,i.options[s]=t,a=i.renderCache.item,l=i.renderCache.option,a&&(delete a[e],delete a[s]),l&&(delete l[e],delete l[s]),i.items.indexOf(s)!==-1&&(n=i.getItem(e),r=d(i.render("item",t)),n.hasClass("active")&&r.addClass("active"),n.replaceWith(r)),i.lastQuery=null,i.isOpen&&i.refreshOptions(!1)}},removeOption:function(e,t){var i=this;e=F(e);var n=i.renderCache.item,r=i.renderCache.option;n&&delete n[e],r&&delete r[e],delete i.userOptions[e],delete i.options[e],i.lastQuery=null,i.trigger("option_remove",e),i.removeItem(e,t)},clearOptions:function(e){var t=this;t.loadedSearches={},t.userOptions={},t.renderCache={};var i=t.options;d.each(t.options,function(n,r){t.items.indexOf(n)==-1&&delete i[n]}),t.options=t.sifter.items=i,t.lastQuery=null,t.trigger("option_clear"),t.clear(e)},getOption:function(e){return this.getElementWithValue(e,this.$dropdown_content.find("[data-selectable]"))},getFirstOption:function(){var e=this.$dropdown.find("[data-selectable]");return e.length>0?e.eq(0):d()},getAdjacentOption:function(e,t){var i=this.$dropdown.find("[data-selectable]"),n=i.index(e)+t;return n>=0&&n<i.length?i.eq(n):d()},getElementWithValue:function(e,t){if(e=F(e),typeof e!="undefined"&&e!==null){for(var i=0,n=t.length;i<n;i++)if(t[i].getAttribute("data-value")===e)return d(t[i])}return d()},getElementWithTextContent:function(e,t,i){if(e=F(e),typeof e!="undefined"&&e!==null)for(var n=0,r=i.length;n<r;n++){var s=i[n].textContent;if(t==!0&&(s=s!==null?s.toLowerCase():null,e=e.toLowerCase()),s===e)return d(i[n])}return d()},getItem:function(e){return this.getElementWithValue(e,this.$control.children())},getFirstItemMatchedByTextContent:function(e,t){return t=t!==null&&t===!0,this.getElementWithTextContent(e,t,this.$dropdown_content.find("[data-selectable]"))},addItems:function(e,t){this.buffer=document.createDocumentFragment();for(var i=this.$control[0].childNodes,n=0;n<i.length;n++)this.buffer.appendChild(i[n]);for(var r=Array.isArray(e)?e:[e],n=0,s=r.length;n<s;n++)this.isPending=n<s-1,this.addItem(r[n],t);var o=this.$control[0];o.insertBefore(this.buffer,o.firstChild),this.buffer=null},addItem:function(e,t){var i=t?[]:["change"];te(this,i,function(){var n,r,s,o=this,a=o.settings.mode,l,c,u,f;if(e=F(e),o.items.indexOf(e)!==-1){a==="single"&&o.close();return}o.options.hasOwnProperty(e)&&(a==="single"&&o.clear(t),!(a==="multi"&&o.isFull())&&(n=d(o.render("item",o.options[e])),f=o.isFull(),o.items.splice(o.caretPos,0,e),o.insertAtCaret(n),(!o.isPending||!f&&o.isFull())&&o.refreshState(),o.isSetup&&(s=o.$dropdown_content.find("[data-selectable]"),o.isPending||(r=o.getOption(e),u=o.getAdjacentOption(r,1).attr("data-value"),o.refreshOptions(o.isFocused&&a!=="single"),u&&o.setActiveOption(o.getOption(u))),!s.length||o.isFull()?o.close():o.isPending||o.positionDropdown(),o.updatePlaceholder(),o.trigger("item_add",e,n),o.isPending||o.updateOriginalInput({silent:t}))))})},removeItem:function(e,t){var i=this,n,r,s;n=e instanceof d?e:i.getItem(e),e=F(n.attr("data-value")),r=i.items.indexOf(e),r!==-1&&(i.trigger("item_before_remove",e,n),n.remove(),n.hasClass("active")&&(n.removeClass("active"),s=i.$activeItems.indexOf(n[0]),i.$activeItems.splice(s,1),n.removeClass("active")),i.items.splice(r,1),i.lastQuery=null,!i.settings.persist&&i.userOptions.hasOwnProperty(e)&&i.removeOption(e,t),r<i.caretPos&&i.setCaret(i.caretPos-1),i.refreshState(),i.updatePlaceholder(),i.updateOriginalInput({silent:t}),i.positionDropdown(),i.trigger("item_remove",e,n))},createItem:function(e,t){var i=this,n=i.caretPos;e=e||(i.$control_input.val()||"").trim();var r=arguments[arguments.length-1];if(typeof r!="function"&&(r=function(){}),typeof t!="boolean"&&(t=!0),!i.canCreate(e))return r(),!1;i.lock();var s=typeof i.settings.create=="function"?this.settings.create:function(l){var c={};c[i.settings.labelField]=l;var u=l;if(i.settings.formatValueToKey&&typeof i.settings.formatValueToKey=="function"&&(u=i.settings.formatValueToKey.apply(this,[u]),u===null||typeof u=="undefined"||typeof u=="object"||typeof u=="function"))throw new Error('Selectize "formatValueToKey" setting must be a function that returns a value other than object or function.');return c[i.settings.valueField]=u,c},o=ye(function(l){if(i.unlock(),!l||typeof l!="object")return r();var c=F(l[i.settings.valueField]);if(typeof c!="string")return r();i.setTextboxValue(""),i.addOption(l),i.setCaret(n),i.addItem(c),i.refreshOptions(t&&i.settings.mode!=="single"),r(l)}),a=s.apply(this,[e,o]);return typeof a!="undefined"&&o(a),!0},refreshItems:function(e){this.lastQuery=null,this.isSetup&&this.addItem(this.items,e),this.refreshState(),this.updateOriginalInput({silent:e})},refreshState:function(){this.refreshValidityState(),this.refreshClasses()},refreshValidityState:function(){if(!this.isRequired)return!1;var e=!this.items.length;this.isInvalid=e,this.$control_input.prop("required",e),this.$input.prop("required",!e)},refreshClasses:function(){var e=this,t=e.isFull(),i=e.isLocked;e.$wrapper.toggleClass("rtl",e.rtl),e.$control.toggleClass("focus",e.isFocused).toggleClass("disabled",e.isDisabled).toggleClass("required",e.isRequired).toggleClass("invalid",e.isInvalid).toggleClass("locked",i).toggleClass("full",t).toggleClass("not-full",!t).toggleClass("input-active",e.isFocused&&!e.isInputHidden).toggleClass("dropdown-active",e.isOpen).toggleClass("has-options",!d.isEmptyObject(e.options)).toggleClass("has-items",e.items.length>0),e.$control_input.data("grow",!t&&!i)},isFull:function(){return this.settings.maxItems!==null&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(e){var t,i,n,r,s,o,a,l,c,u=this;e=e||{},u.tagType===K?(o=u.$input.find("option"),n=[],r=[],s=[],c=[],o.get().forEach(function(f){n.push(f.value)}),u.items.forEach(function(f){a=u.options[f][u.settings.labelField]||"",c.push(f),n.indexOf(f)==-1&&r.push('<option value="'+T(f)+'" selected="selected">'+T(a)+"</option>")}),s=n.filter(function(f){return c.indexOf(f)<0}).map(function(f){return'option[value="'+T(f)+'"]'}),n.length-s.length+r.length===0&&!u.$input.attr("multiple")&&r.push('<option value="" selected="selected"></option>'),u.$input.find(s.join(", ")).remove(),u.$input.append(r.join(""))):(u.$input.val(u.getValue()),u.$input.attr("value",u.$input.val())),u.isSetup&&(e.silent||u.trigger("change",u.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var e=this.$control_input;this.items.length?e.removeAttr("placeholder"):e.attr("placeholder",this.settings.placeholder),e.triggerHandler("update",{force:!0})}},open:function(){var e=this;e.isLocked||e.isOpen||e.settings.mode==="multi"&&e.isFull()||(e.focus(),e.isOpen=!0,e.refreshState(),e.$dropdown.css({visibility:"hidden",display:"block"}),e.setupDropdownHeight(),e.positionDropdown(),e.$dropdown.css({visibility:"visible"}),e.trigger("dropdown_open",e.$dropdown))},close:function(){var e=this,t=e.isOpen;e.settings.mode==="single"&&e.items.length&&(e.hideInput(),e.isBlurring&&e.$control_input[0].blur()),e.isOpen=!1,e.$dropdown.hide(),e.setActiveOption(null),e.refreshState(),t&&e.trigger("dropdown_close",e.$dropdown)},positionDropdown:function(){var e=this.$control,t=this.settings.dropdownParent==="body"?e.offset():e.position();t.top+=e.outerHeight(!0);var i=this.$wrapper[0].style.width!=="fit-content"?this.settings.dropdownParent==="body"?"max-content":"100%":"max-content";this.settings.minWidth&&this.settings.minWidth>i&&(i=this.settings.minWidth),this.settings.dropdownParent!=="body"&&i==="max-content"&&e.outerWidth(!0)>=this.$dropdown.outerWidth(!0)&&(i="100%"),this.$dropdown.css({width:i,minWidth:e.outerWidth(!0),top:t.top,left:t.left})},setupDropdownHeight:function(){if(typeof this.settings.dropdownSize=="object"&&this.settings.dropdownSize.sizeType!=="auto"){var e=this.settings.dropdownSize.sizeValue;if(this.settings.dropdownSize.sizeType==="numberItems"){for(var t=this.$dropdown_content.find("*").not(".optgroup, .highlight").not(this.settings.ignoreOnDropwdownHeight),i=0,n=0,r=0,s=0,o=0;o<e;o++){var a=d(t[o]);if(a.length===0)break;if(i+=a.outerHeight(!0),typeof a.data("selectable")=="undefined"){if(a.hasClass("optgroup-header")){var l=window.getComputedStyle(a.parent()[0],":before");l&&(n=l.marginTop?Number(l.marginTop.replace(/\W*(\w)\w*/g,"$1")):0,r=l.marginBottom?Number(l.marginBottom.replace(/\W*(\w)\w*/g,"$1")):0,s=l.borderTopWidth?Number(l.borderTopWidth.replace(/\W*(\w)\w*/g,"$1")):0)}e++}}var c=this.$dropdown_content.css("padding-top")?Number(this.$dropdown_content.css("padding-top").replace(/\W*(\w)\w*/g,"$1")):0,u=this.$dropdown_content.css("padding-bottom")?Number(this.$dropdown_content.css("padding-bottom").replace(/\W*(\w)\w*/g,"$1")):0;e=i+c+u+n+r+s+"px"}else if(this.settings.dropdownSize.sizeType!=="fixedHeight"){console.warn('Selectize.js - Value of "sizeType" must be "fixedHeight" or "numberItems');return}this.$dropdown_content.css({height:e,maxHeight:"none"})}},clear:function(e){var t=this;t.items.length&&(t.$control.children(":not(input)").remove(),t.items=[],t.lastQuery=null,t.setCaret(0),t.setActiveItem(null),t.updatePlaceholder(),t.updateOriginalInput({silent:e}),t.refreshState(),t.showInput(),t.trigger("clear"))},insertAtCaret:function(e){var t=Math.min(this.caretPos,this.items.length),i=e[0],n=this.buffer||this.$control[0];t===0?n.insertBefore(i,n.firstChild):n.insertBefore(i,n.childNodes[t]),this.setCaret(t+1)},deleteSelection:function(e){var t,i,n,r,s,o,a,l,c,u=this;if(n=e&&e.keyCode===z?-1:1,r=R(u.$control_input[0]),u.$activeOption&&!u.settings.hideSelected&&(typeof u.settings.deselectBehavior=="string"&&u.settings.deselectBehavior==="top"?a=u.getFirstOption().attr("data-value"):a=u.getAdjacentOption(u.$activeOption,-1).attr("data-value")),s=[],u.$activeItems.length){for(c=u.$control.children(".active:"+(n>0?"last":"first")),o=u.$control.children(":not(input)").index(c),n>0&&o++,t=0,i=u.$activeItems.length;t<i;t++)s.push(d(u.$activeItems[t]).attr("data-value"));e&&(e.preventDefault(),e.stopPropagation())}else(u.isFocused||u.settings.mode==="single")&&u.items.length&&(n<0&&r.start===0&&r.length===0?s.push(u.items[u.caretPos-1]):n>0&&r.start===u.$control_input.val().length&&s.push(u.items[u.caretPos]));if(!s.length||typeof u.settings.onDelete=="function"&&u.settings.onDelete.apply(u,[s])===!1)return!1;for(typeof o!="undefined"&&u.setCaret(o);s.length;)u.removeItem(s.pop());return u.showInput(),u.positionDropdown(),u.refreshOptions(!0),a&&(l=u.getOption(a),l.length&&u.setActiveOption(l)),!0},advanceSelection:function(e,t){var i,n,r,s,o,a,l=this;e!==0&&(l.rtl&&(e*=-1),i=e>0?"last":"first",n=R(l.$control_input[0]),l.isFocused&&!l.isInputHidden?(s=l.$control_input.val().length,o=e<0?n.start===0&&n.length===0:n.start===s,o&&!s&&l.advanceCaret(e,t)):(a=l.$control.children(".active:"+i),a.length&&(r=l.$control.children(":not(input)").index(a),l.setActiveItem(null),l.setCaret(e>0?r+1:r))))},advanceCaret:function(e,t){var i=this,n,r;e!==0&&(n=e>0?"next":"prev",i.isShiftDown?(r=i.$control_input[n](),r.length&&(i.hideInput(),i.setActiveItem(r),t&&t.preventDefault())):i.setCaret(i.caretPos+e))},setCaret:function(e){var t=this;if(t.settings.mode==="single"?e=t.items.length:e=Math.max(0,Math.min(t.items.length,e)),!t.isPending){var i,n,r,s,o;for(s=t.$control.children(":not(input)"),i=0,n=s.length;i<n;i++)o=d(s[i]).detach(),i<e?t.$control_input.before(o):t.$control.append(o)}t.caretPos=e},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var e=this;e.$input.prop("disabled",!0),e.$control_input.prop("disabled",!0).prop("tabindex",-1),e.isDisabled=!0,e.lock()},enable:function(){var e=this;e.$input.prop("disabled",!1),e.$control_input.prop("disabled",!1).prop("tabindex",e.tabIndex),e.isDisabled=!1,e.unlock()},destroy:function(){var e=this,t=e.eventNS,i=e.revertSettings;e.trigger("destroy"),e.off(),e.$wrapper.remove(),e.$dropdown.remove(),e.$input.html("").append(i.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:i.tabindex}).show(),e.$control_input.removeData("grow"),e.$input.removeData("selectize"),--w.count==0&&w.$testInput&&(w.$testInput.remove(),w.$testInput=void 0),d(window).off(t),d(document).off(t),d(document.body).off(t),delete e.$input[0].selectize},render:function(e,t){var i,n,r,s="",o=!1,a=this,l=/^[\t \r\n]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i;return(e==="option"||e==="item")&&(i=F(t[a.settings.valueField]),o=!!i),o&&(ee(a.renderCache[e])||(a.renderCache[e]={}),a.renderCache[e].hasOwnProperty(i))?a.renderCache[e][i]:(s=d(a.settings.render[e].apply(this,[t,T])),e==="option"||e==="option_create"?t[a.settings.disabledField]||s.attr("data-selectable",""):e==="optgroup"&&(n=t[a.settings.optgroupValueField]||"",s.attr("data-group",n),t[a.settings.disabledField]&&s.attr("data-disabled","")),(e==="option"||e==="item")&&s.attr("data-value",i||""),o&&(a.renderCache[e][i]=s[0]),s[0])},clearCache:function(e){var t=this;typeof e=="undefined"?t.renderCache={}:delete t.renderCache[e]},canCreate:function(e){var t=this;if(!t.settings.create)return!1;var i=t.settings.createFilter;return e.length&&(typeof i!="function"||i.apply(t,[e]))&&(typeof i!="string"||new RegExp(i).test(e))&&(!(i instanceof RegExp)||i.test(e))}}),w.count=0,w.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,showAddOptionOnCreate:!0,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,showEmptyOptionInDropdown:!1,emptyOptionLabel:"--",setFirstOptionActive:!1,closeAfterSelect:!1,closeDropdownThreshold:250,scrollDuration:60,deselectBehavior:"previous",loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",respect_word_boundaries:!1,normalize:!0,mode:null,wrapperClass:"",inputClass:"",dropdownClass:"",dropdownContentClass:"",dropdownParent:null,copyClassesToDropdown:!0,dropdownSize:{sizeType:"auto",sizeValue:"auto"},ignoreOnDropwdownHeight:"img, i",search:!0,showArrow:!0,render:{}},d.fn.selectize=function(e){var t=d.fn.selectize.defaults,i=d.extend({},t,e),n=i.dataAttr,r=i.labelField,s=i.valueField,o=i.disabledField,a=i.optgroupField,l=i.optgroupLabelField,c=i.optgroupValueField,u=function(h,g){var v,y,O,p,x=h.attr(n);if(x)for(g.options=JSON.parse(x),v=0,y=g.options.length;v<y;v++)g.items.push(g.options[v][s]);else{var _=(h.val()||"").trim();if(!i.allowEmptyOption&&!_.length)return;for(O=_.split(i.delimiter),v=0,y=O.length;v<y;v++)p={},p[r]=O[v],p[s]=O[v],g.options.push(p);g.items=O}},f=function(h,g){var v,y,O,p,x=0,_=g.options,m={},E=function(b){var C=n&&b.attr(n),S=b.data(),I={};return typeof C=="string"&&C.length&&(xe(C)?Object.assign(I,JSON.parse(C)):I[C]=C),Object.assign(I,S),I||null},V=function(b,C){b=d(b);var S=F(b.val());if(!(!S&&!i.allowEmptyOption)){if(m.hasOwnProperty(S)){if(C){var I=m[S][a];I?Array.isArray(I)?I.push(C):m[S][a]=[I,C]:m[S][a]=C}return}var $=E(b)||{};$[r]=$[r]||b.text(),$[s]=$[s]||S,$[o]=$[o]||b.prop("disabled"),$[a]=$[a]||C,$.styles=b.attr("style")||"",$.classes=b.attr("class")||"",m[S]=$,_.push($),b.is(":selected")&&g.items.push(S)}},j=function(b){var C,S,I,$,M;for(b=d(b),I=b.attr("label"),I&&($=E(b)||{},$[l]=I,$[c]=I,$[o]=b.prop("disabled"),g.optgroups.push($)),M=d("option",b),C=0,S=M.length;C<S;C++)V(M[C],I)};for(g.maxItems=h.attr("multiple")?null:1,p=h.children(),v=0,y=p.length;v<y;v++)O=p[v].tagName.toLowerCase(),O==="optgroup"?j(p[v]):O==="option"&&V(p[v])};return this.each(function(){if(!this.selectize){var h,g=d(this),v=this.tagName.toLowerCase(),y=g.attr("placeholder")||g.attr("data-placeholder");if(!y&&!i.allowEmptyOption&&(y=g.children('option[value=""]').text()),i.allowEmptyOption&&i.showEmptyOptionInDropdown&&!g.children('option[value=""]').length){var O=g.html(),p=T(i.emptyOptionLabel||"--");g.html('<option value="">'+p+"</option>"+O)}var x={placeholder:y,options:[],optgroups:[],items:[]};v==="select"?f(g,x):u(g,x),h=new w(g,d.extend(!0,{},t,x,e)),h.settings_user=e}})},d.fn.selectize.defaults=w.defaults,d.fn.selectize.support={validity:Z},w.define("auto_position",function(){var e=this;const t={top:"top",bottom:"bottom"};e.positionDropdown=function(){return function(){const i=this.$control,n=this.settings.dropdownParent==="body"?i.offset():i.position();n.top+=i.outerHeight(!0);const r=this.$dropdown.prop("scrollHeight")+5,s=this.$control.get(0).getBoundingClientRect().top,o=this.$wrapper.height(),a=e.$control.get(0).getBoundingClientRect().bottom,l=s+r+o>window.innerHeight&&a-r-o>=0?t.top:t.bottom;let c=this.$wrapper[0].style.width!=="fit-content"?this.settings.dropdownParent==="body"?"max-content":"100%":"max-content";const u={width:c,minWidth:i.outerWidth(!0),left:n.left};if(l===t.top){const f={bottom:n.top,top:"unset"};this.settings.dropdownParent==="body"&&(f.top=n.top-this.$dropdown.outerHeight(!0)-i.outerHeight(!0),f.bottom="unset"),Object.assign(u,f),this.$dropdown.addClass("selectize-position-top"),this.$control.addClass("selectize-position-top")}else Object.assign(u,{top:n.top,bottom:"unset"}),this.$dropdown.removeClass("selectize-position-top"),this.$control.removeClass("selectize-position-top");this.settings.dropdownParent!=="body"&&c==="max-content"&&i.outerWidth(!0)>=this.$dropdown.outerWidth(!0)&&(c="100%"),this.$dropdown.css(u)}}()}),w.define("auto_select_on_type",function(e){var t=this;t.onBlur=function(){var i=t.onBlur;return function(n){var r=t.getFirstItemMatchedByTextContent(t.lastValue,!0);return typeof r.attr("data-value")!="undefined"&&t.getValue()!==r.attr("data-value")&&t.setValue(r.attr("data-value")),i.apply(this,arguments)}}()}),w.define("autofill_disable",function(e){var t=this;t.setup=function(){var i=t.setup;return function(){i.apply(t,arguments),t.$control_input.attr({name:G(21),autocomplete:G(21)})}}()}),w.define("clear_button",function(e){var t=this;e=d.extend({title:"Clear",className:"clear",label:"\xD7",html:function(i){return'<a class="'+i.className+'" title="'+i.title+'"> '+i.label+"</a>"}},e),t.setup=function(){var i=t.setup;return function(){i.apply(t,arguments),t.$button_clear=d(e.html(e)),t.settings.mode==="single"&&t.$wrapper.addClass("single"),t.$wrapper.append(t.$button_clear),(t.getValue()===""||t.getValue().length===0)&&t.$wrapper.find("."+e.className).css("display","none"),t.on("change",function(){t.getValue()===""||t.getValue().length===0?t.$wrapper.find("."+e.className).css("display","none"):t.$wrapper.find("."+e.className).css("display","")}),t.$wrapper.on("click","."+e.className,function(n){n.preventDefault(),n.stopImmediatePropagation(),n.stopPropagation(),!t.isLocked&&(t.clear(),t.$wrapper.find("."+e.className).css("display","none"))})}}()}),w.define("drag_drop",function(e){if(!d.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if(this.settings.mode==="multi"){var t=this;t.lock=function(){var i=t.lock;return function(){var n=t.$control.data("sortable");return n&&n.disable(),i.apply(t,arguments)}}(),t.unlock=function(){var i=t.unlock;return function(){var n=t.$control.data("sortable");return n&&n.enable(),i.apply(t,arguments)}}(),t.setup=function(){var i=t.setup;return function(){i.apply(this,arguments);var n=t.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:t.isLocked,start:function(r,s){s.placeholder.css("width",s.helper.css("width")),n.addClass("dragging")},stop:function(){n.removeClass("dragging");var r=t.$activeItems?t.$activeItems.slice():null,s=[];n.children("[data-value]").each(function(){s.push(d(this).attr("data-value"))}),t.isFocused=!1,t.setValue(s),t.isFocused=!0,t.setActiveItem(r),t.positionDropdown()}})}}()}}),w.define("dropdown_header",function(e){var t=this;e=d.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(i){return'<div class="'+i.headerClass+'"><div class="'+i.titleRowClass+'"><span class="'+i.labelClass+'">'+i.title+'</span><a href="javascript:void(0)" class="'+i.closeClass+'">&#xd7;</a></div></div>'}},e),t.setup=function(){var i=t.setup;return function(){i.apply(t,arguments),t.$dropdown_header=d(e.html(e)),t.$dropdown.prepend(t.$dropdown_header),t.$dropdown_header.find("."+e.closeClass).on("click",function(){t.close()})}}()}),w.define("optgroup_columns",function(e){var t=this;e=d.extend({equalizeWidth:!0,equalizeHeight:!0},e),this.getAdjacentOption=function(r,s){var o=r.closest("[data-group]").find("[data-selectable]"),a=o.index(r)+s;return a>=0&&a<o.length?o.eq(a):d()},this.onKeyDown=function(){var r=t.onKeyDown;return function(s){var o,a,l,c;if(this.isOpen&&(s.keyCode===B||s.keyCode===J)){t.ignoreHover=!0,c=this.$activeOption.closest("[data-group]"),o=c.find("[data-selectable]").index(this.$activeOption),s.keyCode===B?c=c.prev("[data-group]"):c=c.next("[data-group]"),l=c.find("[data-selectable]"),a=l.eq(Math.min(l.length-1,o)),a.length&&this.setActiveOption(a);return}return r.apply(this,arguments)}}();var i=function(){var r,s=i.width,o=document;return typeof s=="undefined"&&(r=o.createElement("div"),r.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',r=r.firstChild,o.body.appendChild(r),s=i.width=r.offsetWidth-r.clientWidth,o.body.removeChild(r)),s},n=function(){var r,s,o,a,l,c,u;if(u=d("[data-group]",t.$dropdown_content),s=u.length,!(!s||!t.$dropdown_content.width())){if(e.equalizeHeight){for(o=0,r=0;r<s;r++)o=Math.max(o,u.eq(r).height());u.css({height:o})}e.equalizeWidth&&(c=t.$dropdown_content.innerWidth()-i(),a=Math.round(c/s),u.css({width:a}),s>1&&(l=c-a*(s-1),u.eq(s-1).css({width:l})))}};(e.equalizeHeight||e.equalizeWidth)&&(L.after(this,"positionDropdown",n),L.after(this,"refreshOptions",n))}),w.define("read-only",function(e){var t=this;this.setup=function(){var i=t.setup;return function(){i.apply(this,arguments),this.$dropdown.hasClass("read-only")&&this.$control_input.attr("readonly","readonly")}}(),this.readonly=function(){return function(i){i?(this.$control_input.attr("readonly","readonly"),this.$dropdown.addClass("read-only")):(this.$control_input.removeAttr("readonly"),this.$dropdown.removeClass("read-only"))}}()}),w.define("remove_button",function(e){if(this.settings.mode!=="single"){e=d.extend({label:"&#xd7;",title:"Remove",className:"remove",append:!0},e);var t=function(i,n){var r=i,s='<a href="javascript:void(0)" class="'+n.className+'" tabindex="-1" title="'+T(n.title)+'">'+n.label+"</a>",o=function(a,l){var c=a.search(/(<\/[^>]+>\s*)$/);return a.substring(0,c)+l+a.substring(c)};i.setup=function(){var a=r.setup;return function(){if(n.append){var l=r.settings.render.item;r.settings.render.item=function(c){return o(l.apply(i,arguments),s)}}a.apply(i,arguments),i.$control.on("click","."+n.className,function(c){if(c.preventDefault(),!r.isLocked){var u=d(c.currentTarget).parent();return r.setActiveItem(u),r.deleteSelection()&&r.setCaret(r.items.length),!1}})}}()};t(this,e)}}),w.define("restore_on_backspace",function(e){var t=this;e.text=e.text||function(i){return i[this.settings.labelField]},this.onKeyDown=function(){var i=t.onKeyDown;return function(n){var r,s;if(n.keyCode===z&&this.$control_input.val()===""&&!this.$activeItems.length&&(r=this.caretPos-1,r>=0&&r<this.items.length)){s=this.options[this.items[r]],this.deleteSelection(n)&&(this.setTextboxValue(e.text.apply(this,[s])),this.refreshOptions(!0)),n.preventDefault();return}return i.apply(this,arguments)}}()}),w.define("select_on_focus",function(e){var t=this;t.on("focus",function(){var i=t.onFocus;return function(n){var r=t.getItem(t.getValue()).text();return t.clear(),t.setTextboxValue(r),t.$control_input.select(),setTimeout(function(){t.settings.selectOnTab&&t.setActiveOption(t.getFirstItemMatchedByTextContent(r)),t.settings.score=null},0),i.apply(this,arguments)}}()),t.onBlur=function(){var i=t.onBlur;return function(n){return t.getValue()===""&&t.lastValidValue!==t.getValue()&&t.setValue(t.lastValidValue),setTimeout(function(){t.settings.score=function(){return function(){return 1}}},0),i.apply(this,arguments)}}(),t.settings.score=function(){return function(){return 1}}}),w.define("tag_limit",function(e){const t=this;e.tagLimit=e.tagLimit,this.onBlur=function(i){const n=t.onBlur;return function(r){if(n.apply(this,r),!r)return;const s=this.$control,o=s.find(".item"),a=e.tagLimit;a===void 0||o.length<=a||(o.toArray().forEach(function(l,c){c<a||d(l).hide()}),s.append("<span><b>"+(o.length-a)+"</b></span>"))}}(),this.onFocus=function(i){const n=t.onFocus;return function(r){if(n.apply(this,r),!r)return;const s=this.$control;s.find(".item").show(),s.find("span").remove()}}()}),w});
</script>
<script>Selectize.define("selectize-plugin-a11y",function(c){var t=this,l=13;typeof t.accessibility>"u"&&(t.accessibility={}),t.accessibility.helpers={randomId:function(e){for(var r="",s=e||10,i="abcdefghijklmnopqrstuvwxyz0123456789",n=i.length,a=0;a<s;a++)r+=i[Math.floor(n*Math.random())];return r}},t.accessibility.liveRegion={$region:"",speak:function(e){var r=$("<div></div>");r.text(e),this.$region.html(r)},domListener:function(){var e=new MutationObserver(function(r){r.forEach(function(s){var i=$(s.target);if(i.hasClass("items"))if(i.hasClass("dropdown-active")){t.$control_input.attr("aria-expanded","true");for(var n=t.$dropdown_content[0].children,a=0;a<n.length;a++){var o=n[a].attributes;o.role||n[a].setAttribute("role","option"),o.id||n[a].setAttribute("id",t.accessibility.helpers.randomId())}}else t.$control_input.attr("aria-expanded","false"),t.$control_input.removeAttr("aria-activedescendant");else i.hasClass("active")&&i.attr("data-value")&&(t.$control_input.attr("aria-activedescendant",i.attr("id")),t.accessibility.liveRegion.speak(i.text(),500))})});e.observe(t.$dropdown[0],{attributes:!0,attributeFilter:["class"],subtree:!0,attributeOldValue:!0}),e.observe(t.$control[0],{attributes:!0,attributeFilter:["class"]}),e.observe(t.$control_input[0],{attributes:!0,attributeFilter:["value"]})},setAttributes:function(){this.$region.attr({"aria-live":"assertive",role:"log","aria-relevant":"additions","aria-atomic":"true"})},setStyles:function(){this.$region.css({position:"absolute",width:"1px",height:"1px","margin-top":"-1px",clip:"rect(1px, 1px, 1px, 1px)",overflow:"hidden"})},init:function(){this.$region=$("<div>"),this.setAttributes(),this.setStyles(),$("body").append(this.$region),this.domListener()}},this.setup=function(){var e=t.setup;return function(){e.apply(this,arguments);var r=t.accessibility.helpers.randomId(),s=t.accessibility.helpers.randomId();t.$control.on("keydown",function(i){i.keyCode===l&&(t.settings.openOnFocus?(t.settings.openOnFocus=!1,t.focus(),setTimeout(function(){t.settings.openOnFocus=!0},0)):t.focus())}),t.$control_input.attr({role:"combobox","aria-expanded":"false",haspopup:"listbox","aria-owns":s,"aria-label":t.$wrapper.closest("[data-accessibility-selectize-label]").attr("data-accessibility-selectize-label")}),t.$dropdown_content.attr({role:"listbox",id:s}),t.accessibility.liveRegion.init()}}(),this.destroy=function(){var e=t.destroy;return function(){return t.accessibility.liveRegion.$region.remove(),e.apply(this,arguments)}}()});
</script>
<style type="text/css">.btn.btn-circle{border-radius:30px;font-size:20px;height:49px;line-height:2;padding:5px 0;text-align:center;width:49px}.btn.btn-circle-xs{border-radius:30px;font-size:13px;height:19px;line-height:.1;padding:1px 0;text-align:center;width:19px}.btn.btn-circle-sm{border-radius:30px;font-size:20px;height:35px;line-height:50%;padding:2px 0;text-align:center;width:35px}.btn.btn-circle-lg{border-radius:70px;font-size:30px;height:79px;line-height:2;padding:13px 0;text-align:center;width:79px}.btn.btn-square{font-size:20px;height:49px;line-height:2;padding:5px 0;text-align:center;width:49px}.btn.btn-square-xs{font-size:13px;height:19px;line-height:.1;padding:1px 0;text-align:center;width:19px}.btn.btn-square-sm{font-size:1pc;height:35px;line-height:1.65;padding:2px 0;text-align:center;width:35px}.btn.btn-square-lg{font-size:30px;height:79px;line-height:2;padding:13px 0;text-align:center;width:79px}.btn.btn-color-sw.active:after{color:#fff;content:"\e013";display:inline-block;font-family:Glyphicons Halflings;font-size:11px;left:0;line-height:20px;position:absolute;right:0;text-align:center}.btn.btn-color-sw{-moz-transition:all ease .1s;-o-transition:all ease .1s;-webkit-transition:all ease .1s;display:block;height:20px;margin:0;outline:0;padding:0;position:relative;transition:all ease .1s;width:20px}.btn.btn-color-sw:focus{outline:0!important}.material-switch>input[type=checkbox]{display:none}.material-switch>label.switch{cursor:pointer;height:0;position:relative;width:40px}.material-switch>label.switch:before{background:#000;border-radius:8px;box-shadow:inset 0 0 10px rgba(0,0,0,.5);content:"";height:1pc;margin-top:-10px;opacity:.3;position:absolute;transition:all .4s ease-in-out;width:40px}.material-switch>label.switch:after{background:#fff;border-radius:1pc;box-shadow:0 0 5px rgba(0,0,0,.3);content:"";height:24px;left:-4px;margin-top:-10px;position:absolute;top:-4px;transition:all .3s ease-in-out;width:24px}.material-switch>input[type=checkbox]:checked+label.switch:before{background:inherit;opacity:.5}.material-switch>input[type=checkbox]:checked+label.switch:after{background:inherit;left:20px}.material-switch label{cursor:pointer;font-weight:400}
</style>
<script>function updateLabel(n,e){if(void 0!==n){if(1!==e.length)throw new Error("labelNode must be of length 1");Array.isArray(n)&&0===n.length?e.addClass("shiny-label-null"):(e.text(n),e.removeClass("shiny-label-null"))}}var awesomeCheckboxBinding=new Shiny.InputBinding;$.extend(awesomeCheckboxBinding,{find:function(n){return $(n).find(".awesome-checkbox-class")},getId:function(n){return n.id},getValue:function(n){return $('input:checkbox[name="'+Shiny.$escape(n.id)+'"]:checked').val()},setValue:function(n,e){$('input:checkbox[name="'+Shiny.$escape(n.id)+'"][value="'+Shiny.$escape(e)+'"]').prop("checked",!0)},subscribe:function(n,e){$(n).on("change.awesomeCheckboxBinding",(function(n){e()}))},unsubscribe:function(n){$(n).off(".awesomeCheckboxBinding")},getState:function(n){for(var e=$('input:checkbox[name="'+Shiny.$escape(n.id)+'"]'),t=new Array(e.length),i=0;i<t.length;i++)t[i]={value:e[i].value,label:this._getLabel(e[i])};return{label:$(n).parent().find('label[for="'+Shiny.$escape(n.id)+'"]').text(),value:this.getValue(n),options:t}},receiveMessage:function(n,e){var t=$(n);e.hasOwnProperty("options")&&(t.find("div.shiny-options-group").remove(),t.find("label.checkbox").remove(),t.append(e.options)),e.hasOwnProperty("value")&&this.setValue(n,e.value),e.hasOwnProperty("label")&&$(n).find('label[for="'+Shiny.$escape(n.id)+Shiny.$escape(e.value)+'"]').text(e.label),$(n).trigger("change")}}),Shiny.inputBindings.register(awesomeCheckboxBinding,"shinyWidgets.awesomeCheckbox");var awesomeRadioBinding=new Shiny.InputBinding;$.extend(awesomeRadioBinding,{find:function(n){return $(n).find(".awesome-bootstrap-radio")},getId:function(n){return n.id},getValue:function(n){return $('input:radio[name="'+Shiny.$escape(n.id)+'"]:checked').val()},setValue:function(n,e){$('input:radio[name="'+Shiny.$escape(n.id)+'"][value="'+Shiny.$escape(e)+'"]').prop("checked",!0)},subscribe:function(n,e){$(n).on("change.awesomeRadioBinding",(function(n){e()}))},unsubscribe:function(n){$(n).off(".awesomeRadioBinding")},getState:function(n){for(var e=$('input:radio[name="'+Shiny.$escape(n.id)+'"]'),t=new Array(e.length),i=0;i<t.length;i++)t[i]={value:e[i].value,label:this._getLabel(e[i])};return{label:$(n).parent().find('label[for="'+Shiny.$escape(n.id)+'"]').text(),value:this.getValue(n),options:t}},receiveMessage:function(n,e){var t=$(n);e.hasOwnProperty("options")&&(t.find("div.shiny-options-group").remove(),t.find("label.radio").remove(),t.append(e.options)),e.hasOwnProperty("value")&&this.setValue(n,e.value),e.hasOwnProperty("label")&&$(n).parent().find('label[for="'+Shiny.$escape(n.id)+'"]').text(e.label),$(n).trigger("change")}}),Shiny.inputBindings.register(awesomeRadioBinding,"shinyWidgets.awesomeRadio");var pickerInputBinding=new Shiny.InputBinding;$.extend(pickerInputBinding,{find:function(n){return $(n).find(".selectpicker")},getId:function(n){return n.id},getValue:function(n){return $(n).val()},setValue:function(n,e){var t=$(n).data("callback"),i=$(n).data("shinyInputBinding");$(n).selectpicker("destroy"),$(n).val(e),$(n).data("callback",t),$(n).data("shinyInputBinding",i),this.initialize(n),$(n).on("changed.bs.select.pickerInput",(function(n){t()}))},getState:function(n){for(var e=new Array(n.length),t=0;t<n.length;t++)e[t]={value:n[t].value,label:n[t].label};return{label:$(n).parent().find('label[for="'+Shiny.$escape(n.id)+'"]').text(),value:this.getValue(n),options:e}},receiveMessage:function(n,e){var t=$(n),i=$(n).data("callback"),a=$(n).data("shinyInputBinding");e.hasOwnProperty("options")&&($(n).selectpicker("destroy"),e.clearOptions&&($(n).removeData(),$(n).data("callback",i),$(n).data("shinyInputBinding",a)),$(n).data(e.options),this.initialize(n),$(n).on("changed.bs.select.pickerInput",(function(n){i()}))),e.hasOwnProperty("choices")&&($(n).selectpicker("destroy"),t.empty().append(e.choices),$(n).data("callback",i),$(n).data("shinyInputBinding",a),this.initialize(n),$(n).on("changed.bs.select.pickerInput",(function(n){i()}))),e.hasOwnProperty("value")&&this.setValue(n,e.value),e.hasOwnProperty("label")&&$(n).parent().parent().find('label[for="'+Shiny.$escape(n.id)+'"]').text(e.label),$(n).trigger("change")},subscribe:function(n,e){$(n).data("callback",e),$(n).on("changed.bs.select.pickerInput",(function(n){e()}))},unsubscribe:function(n){$(n).off(".pickerInput")},initialize:function(n){$(n).selectpicker(),"true"===$(n).attr("data-state-input")&&($(n).on("shown.bs.select",(function(e){Shiny.setInputValue(n.id+"_open",!0)})),$(n).on("hidden.bs.select",(function(e){Shiny.setInputValue(n.id+"_open",!1)}))),$(document).off("focusout.dropdown.data-api")}}),Shiny.inputBindings.register(pickerInputBinding,"shinyWidgets.pickerInput"),$((function(){$(".sw-switchInput").each((function(){$(this).bootstrapSwitch()}))}));var switchInputBinding=new Shiny.InputBinding;function tron_skin(){if("tron"==this.$.data("skin")){this.cursorExt=.3;var n,e=this.arc(this.cv);return this.g.lineWidth=this.lineWidth,this.o.displayPrevious&&(n=this.arc(this.v),this.g.beginPath(),this.g.strokeStyle=this.pColor,this.g.arc(this.xy,this.xy,this.radius-this.lineWidth,n.s,n.e,n.d),this.g.stroke()),this.g.beginPath(),this.g.strokeStyle=this.o.fgColor,this.g.arc(this.xy,this.xy,this.radius-this.lineWidth,e.s,e.e,e.d),this.g.stroke(),this.g.lineWidth=2,this.g.beginPath(),this.g.strokeStyle=this.o.fgColor,this.g.arc(this.xy,this.xy,this.radius-this.lineWidth+1+2*this.lineWidth/3,0,2*Math.PI,!1),this.g.stroke(),!1}}$.extend(switchInputBinding,{find:function(n){return $(n).find(".sw-switchInput")},getId:function(n){return n.id},getValue:function(n){return n.checked},setValue:function(n,e){n.checked=e},subscribe:function(n,e){$(n).on("switchChange.bootstrapSwitch",(function(n){e(!1)}))},unsubscribe:function(n){$(n).off(".switchInputBinding")},getState:function(n){return{value:n.checked}},receiveMessage:function(n,e){e.hasOwnProperty("value")&&(n.checked=e.value),e.hasOwnProperty("label")&&$(n).bootstrapSwitch("labelText",e.label),e.hasOwnProperty("offLabel")&&$(n).bootstrapSwitch("offText",e.offLabel),e.hasOwnProperty("onLabel")&&$(n).bootstrapSwitch("onText",e.onLabel),e.hasOwnProperty("onStatus")&&$(n).bootstrapSwitch("onColor",e.onStatus),e.hasOwnProperty("offStatus")&&$(n).bootstrapSwitch("offColor",e.offStatus),e.hasOwnProperty("disabled")&&$(n).bootstrapSwitch("disabled",e.disabled,e.disabled),$(n).trigger("change")},initialize:function(n){$(n).bootstrapSwitch()}}),Shiny.inputBindings.register(switchInputBinding,"shinyWidgets.switchInput");var knobInputBinding=new Shiny.InputBinding;$.extend(knobInputBinding,{find:function(n){return $(n).find(".knob-input")},initialize:function(n){var e=$(n).data("value"),t=$(n).data("post");t=void 0===t?"":t;var i,a=$(n).data("pre");a=void 0===a?"":a,n.value=e,i="tron"===$(n).data("skin")?tron_skin:function(){this.i.val(a+this.cv+t)},$(n).knob({draw:i,format:function(n){return a+n+t}})},getValue:function(n){var e=n.value,t=$(n).data("pre");if(void 0!==t){var i=new RegExp("^"+t);e=e.replace(i,"")}var a=$(n).data("post");if(void 0!==a){var r=new RegExp(a+"$");e=e.replace(r,"")}return parseFloat(e)},subscribe:function(n,e){$(n).data("immediate")?($(n).on("keyup.knobInputBinding",(function(n){e(!0)})),$(n).trigger("configure",{change:function(n){e(!0)},release:function(n){e(!1)}}),$(n).on("change.knobInputBinding",(function(n){e(!0)}))):($(n).on("keyup.knobInputBinding",(function(n){e(!0)})),$(n).trigger("configure",{release:function(n){e(!1)}}))},unsubscribe:function(n){$(n).off(".knobInputBinding")},receiveMessage:function(n,e){e.hasOwnProperty("value")&&$(n).val(e.value).trigger("change"),e.hasOwnProperty("readOnly")&&$(n).trigger("configure",{readOnly:e.readOnly}),e.hasOwnProperty("options")&&$(n).trigger("configure",e.options),e.hasOwnProperty("label")&&$(n).parent().parent().find('label[for="'+Shiny.$escape(n.id)+'"]').text(e.label),$(n).trigger("change")},getState:function(n){return{label:$(n).parent().parent().find('label[for="'+Shiny.$escape(n.id)+'"]').text(),value:n.value}},getRatePolicy:function(){return{policy:"debounce",delay:500}}}),Shiny.inputBindings.register(knobInputBinding,"shinyWidgets.knobInput");var multiInputBinding=new Shiny.InputBinding;$.extend(multiInputBinding,{initialize:function(n){var e=$(n).parent().find('script[data-for="'+Shiny.$escape(n.id)+'"]');e=JSON.parse(e.html()),$(n).multi(e),$(n).trigger("change")},find:function(n){return $(n).find(".multijs")},getId:function(n){return n.id},getValue:function(n){return $(n).val()},setValue:function(n,e){$(n).val(e),$(n).multi(),$(n).trigger("change")},getState:function(n){for(var e=new Array(n.length),t=0;t<n.length;t++)e[t]={value:n[t].value,label:n[t].label};return{label:$(n).parent().find('label[for="'+Shiny.$escape(n.id)+'"]').text(),value:this.getValue(n),options:e}},receiveMessage:function(n,e){var t=$(n);e.hasOwnProperty("options")&&t.empty().append(e.options),e.hasOwnProperty("value")&&this.setValue(n,e.value),e.hasOwnProperty("label")&&$(n).parent().parent().find('label[for="'+Shiny.$escape(n.id)+'"]').text(e.label);var i=new Event("change");$(n).multi(),t.get(0).dispatchEvent(i),t.trigger("change")},subscribe:function(n,e){$(n).on("change",(function(n){e()}))},unsubscribe:function(n){$(n).off(".multiInputBinding")}}),Shiny.inputBindings.register(multiInputBinding,"shinyWidgets.multiInput");var numericRangeInputBinding=new Shiny.InputBinding;function forceIonSliderTextUpdate(n){n.$cache&&n.$cache.input?n.$cache.input.trigger("change"):console.log("Couldn't force ion slider to update")}$.extend(numericRangeInputBinding,{find:function(n){return $(n).find(".shiny-numeric-range-input")},getType:function(n){return"sw.numericRange"},getValue:function(n){var e=$(n).find("input"),t=e[0].value,i=e[1].value;return[t=/^\s*$/.test(t)?null:isNaN(t)?t:+t,i=/^\s*$/.test(i)?null:isNaN(i)?i:+i]},setValue:function(n,e){n.find("input")[0].value=e[0],n.find("input")[1].value=e[1]},subscribe:function(n,e){$(n).on("change.numericRangeInputBinding",(function(n){e()}))},receiveMessage:function(n,e){var t=$(n);e.hasOwnProperty("label")&&t.find('label[for="'+Shiny.$escape(n.id)+'"]').text(e.label),e.hasOwnProperty("value")&&this.setValue(t,e.value),$(n).trigger("change")},unsubscribe:function(n){$(n).off(".numericRangeInputBinding")}}),Shiny.inputBindings.register(numericRangeInputBinding,"shinyWidgets.numericRange"),Shiny.addCustomMessageHandler("update-progressBar-shinyWidgets",(function(n){var e,t=n.id,i=document.getElementById(t),a=document.getElementById(t+"-value"),r=document.getElementById(t+"-total"),s=document.getElementById(t+"-title"),o=n.total,u=Math.round(n.value);o>0?(e=Math.round(u/o*100),null!==a&&(a.innerText=n.commas?u.toLocaleString("en-US"):u),null!==r&&(r.innerText=n.commas?o.toLocaleString("en-US"):o),u=Math.round(u/o*100)):e=n.percent>0?n.percent:u,i.style.width=e+"%",""!==i.innerText&&(i.innerText=u+n.unit_mark),null!==n.status&&(i.className="",i.classList.add("progress-bar"),i.classList.add("progress-bar-"+n.status)),null!==n.title&&(s.innerHTML=n.title)}));var sliderTextBinding=new Shiny.InputBinding;$.extend(sliderTextBinding,{find:function(n){return $.fn.ionRangeSlider?$(n).find(".sw-slider-text"):[]},getType:function(n){var e=$(n).data("data-type");return"date"===e?"shiny.date":"datetime"===e&&"shiny.datetime"},getValue:function(n){var e=$(n).data("ionRangeSlider"),t=e.result,i=e.options.values;return"text"===$(n).data("data-type")?2===this._numValues(n)?[i[t.from].toString(),i[t.to].toString()]:i[t.from].toString():2===this._numValues(n)?[i[t.from],i[t.to]]:i[t.from]},setValue:function(n,e){var t=$(n),i=t.data("ionRangeSlider");t.data("immediate",!0);try{2===this._numValues(n)&&e instanceof Array?i.update({from:e[0],to:e[1]}):i.update({from:e}),forceIonSliderTextUpdate(i)}finally{t.data("immediate",!1)}},subscribe:function(n,e){$(n).on("change.sliderInputBinding",(function(t){e(!$(n).data("immediate")&&!$(n).data("animating"))}))},unsubscribe:function(n){$(n).off(".sliderInputBinding")},receiveMessage:function(n,e){var t=$(n),i=t.data("ionRangeSlider"),a={},r=i.options.values;e.hasOwnProperty("choices")&&(a.values=e.choices,r=e.choices),e.hasOwnProperty("selected")&&(2===this._numValues(n)&&e.selected instanceof Array?(a.from=r.indexOf(e.selected[0]),a.to=r.indexOf(e.selected[1])):a.from=r.indexOf(e.selected)),e.hasOwnProperty("from_fixed")&&(a.from_fixed=e.from_fixed),e.hasOwnProperty("to_fixed")&&(a.to_fixed=e.to_fixed),e.hasOwnProperty("label")&&t.parent().find('label[for="'+Shiny.$escape(n.id)+'"]').text(e.label),t.data("immediate",!0);try{i.update(a),forceIonSliderTextUpdate(i)}finally{t.data("immediate",!1)}},getRatePolicy:function(){return{policy:"debounce",delay:250}},getState:function(n){},initialize:function(n){var e={},t=$(n),i=$(n).data("swvalues");e.values=i,t.ionRangeSlider(e)},_numValues:function(n){return"double"===$(n).data("ionRangeSlider").options.type?2:1}}),Shiny.inputBindings.register(sliderTextBinding,"shiny.sliderText");var spectrumInputBinding=new Shiny.InputBinding;$.extend(spectrumInputBinding,{find:function(n){return $(n).find(".sw-spectrum")},getId:function(n){return $(n).attr("id")},getValue:function(n){return $(n).spectrum("get").toHexString()},setValue:function(n,e){$(n).spectrum("set",e)},subscribe:function(n,e){$(n).on("change",(function(n){e()}))},unsubscribe:function(n){$(n).off(".spectrumInputBinding")},receiveMessage:function(n,e){e.hasOwnProperty("value")&&this.setValue(n,e.value),$(n).trigger("change")},getState:function(n){return{value:this.getValue(n)}},initialize:function(n){var e={},t=$(n).attr("data-update-on");$(n).removeAttr("data-update-on"),"dragstop"==t&&$(n).on("dragstop.spectrum",(function(e){$(n).trigger("change")})),"move"==t&&(e.move=function(){$(n).trigger("change")}),"change"==t&&(e.change=function(){$(n).trigger("change")}),$(n).spectrum(e)},getRatePolicy:function(){return{policy:"debounce",delay:250}}}),Shiny.inputBindings.register(spectrumInputBinding,"shinyWidgets.spectrumInput");var dropMenuInputBinding=new Shiny.InputBinding;$.extend(dropMenuInputBinding,{find:function(n){return $(n).find(".drop-menu-input")},getId:function(n){return n.id},getValue:function(n){return this["instance"+n.id].state.isShown},setValue:function(n,e){},subscribe:function(n,e){var t=this["onHidden"+n.id];this["instance"+n.id].setProps({onShown:function(n){e()},onHidden:function(n){t(n),e()}})},unsubscribe:function(n){$(n).off(".dropMenuInputBinding")},receiveMessage:function(n,e){e.hasOwnProperty("action")&&("enable"==e.action&&this["instance"+n.id].enable(),"disable"==e.action&&this["instance"+n.id].disable(),"show"==e.action&&this["instance"+n.id].show(),"hide"==e.action&&this["instance"+n.id].hide())},getState:function(n){},initialize:function(n){var e=document.getElementById(n.id),t=e.querySelector('script[data-for="'+n.id+'"]');t=JSON.parse(t.innerHTML);var i=document.getElementById(e.dataset.target);t.options.interactive=!0,t.options.onShow=function(n){var t=document.getElementById(e.dataset.template);t.style.display="block",Shiny.bindAll(t,!0),n.setContent(t)},this["onHidden"+n.id]=function(n){var t=n.props.content;t.style.display="none",e.appendChild(t),n.setContent("")},this["instance"+n.id]=tippy(i,t.options)}}),Shiny.inputBindings.register(dropMenuInputBinding,"shinyWidgets.dropMenuInput");var shinyMode=void 0!==window.Shiny&&!!window.Shiny.inputBindings;if(shinyMode){var VerticalTabInputBinding=new Shiny.InputBinding;$.extend(VerticalTabInputBinding,{initialize:function(n){$(n).on("click","> *",(function(n){n.preventDefault(),$(this).siblings("a.active").removeClass("active"),$(this).addClass("active"),$(this).css("display","");var e=$(this).index();$(this).parents(".vrtc-tab-panel-container").find("div.vrtc-tab-panel>div.vrtc-tab-panel-content").removeClass("active").trigger("hidden.bs.collapse"),$(this).parents(".vrtc-tab-panel-container").find("div.vrtc-tab-panel>div.vrtc-tab-panel-content").eq(e).addClass("active").trigger("shown.bs.collapse")}))},find:function(n){return $(n).find(".vertical-tab-panel")},getId:function(n){return n.id},getValue:function(n){return $(n).find(".active").attr("data-value")},setValue:function(n,e){},receiveMessage:function(n,e){var t=$(n);if(e.hasOwnProperty("value"))t.find("[data-value='"+e.value+"']").click();else if(e.hasOwnProperty("validate"))0===t.children(".active").length&&t.children().length>0&&t.children().last().click();else if(e.hasOwnProperty("reorder")){var i=t.children();i.detach(),t.append($.map(e.reorder,(function(n){return i[n-1]})))}},subscribe:function(n,e){$(n).on("click",(function(n){e()}))},unsubscribe:function(n){$(n).off(".VerticalTabInputBinding")}}),Shiny.inputBindings.register(VerticalTabInputBinding,"shinyWidgets.VerticalTabInput")}else $(document).ready((function(){$("div.vrtc-tab-panel-menu>div.list-group").on("click","> *",(function(n){n.preventDefault(),$(this).siblings("a.active").removeClass("active"),$(this).addClass("active"),$(this).css("display","");var e=$(this).index();$(this).parents(".vrtc-tab-panel-container").find("div.vrtc-tab-panel>div.vrtc-tab-panel-content").removeClass("active").trigger("hidden.bs.collapse"),$(this).parents(".vrtc-tab-panel-container").find("div.vrtc-tab-panel>div.vrtc-tab-panel-content").eq(e).addClass("active").trigger("shown.bs.collapse")}))}));
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Customizing shinyfilters</h1>



<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>shinyfilters is built to be fully customizable. This article
demonstrates the ways in which you can customize shinyfilters.</p>
<ol style="list-style-type: decimal">
<li><a href="#extending-shinyfilters">Extending shinyfilters</a></li>
<li><a href="#overwriting-shinyfilters">Overwriting
shinyfilters</a></li>
</ol>
</div>
<div id="motivation" class="section level1">
<h1>Motivation</h1>
<p>Lets say you have an S7 class, <a href="https://github.com/RConsortium/S7/blob/v0.2.0/vignettes/classes-objects.Rmd#L324"><code>Person</code></a>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(S7)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>StringNonEmpty <span class="ot">&lt;-</span> <span class="fu">new_property</span>(</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>    <span class="at">class =</span> class_character,</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>    <span class="at">validator =</span> <span class="cf">function</span>(value) {</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>        <span class="cf">if</span> (<span class="fu">length</span>(value) <span class="sc">!=</span> <span class="dv">1</span> <span class="sc">||</span> <span class="fu">is.na</span>(value) <span class="sc">||</span> value <span class="sc">==</span> <span class="st">&quot;&quot;</span>) {</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>            <span class="fu">return</span>(<span class="st">&quot;must be a non-empty string&quot;</span>)</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>        }</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a>    }</span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>)</span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a>Person <span class="ot">&lt;-</span> <span class="fu">new_class</span>(</span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">&quot;Person&quot;</span>,</span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a>    <span class="at">properties =</span> <span class="fu">list</span>(</span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a>        <span class="at">first_name =</span> StringNonEmpty,</span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a>        <span class="at">last_name =</span> StringNonEmpty</span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a>    )</span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a>)</span></code></pre></div>
<p>And you want to combine a list of <code>Person</code>s into a new
class, <code>People</code>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>People <span class="ot">&lt;-</span> <span class="fu">new_class</span>(</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">&quot;People&quot;</span>,</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>    <span class="at">parent =</span> class_list,</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>    <span class="at">constructor =</span> <span class="cf">function</span>(...) <span class="fu">new_object</span>(<span class="fu">list</span>(...)),</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>    <span class="at">validator =</span> <span class="cf">function</span>(self) {</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>        <span class="cf">if</span> (<span class="sc">!</span><span class="fu">all</span>(<span class="fu">vapply</span>(self, S7_inherits, <span class="fu">logical</span>(<span class="dv">1</span>), <span class="at">class =</span> Person))) {</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>            <span class="fu">return</span>(<span class="st">&quot;must be a list of `Person`&#39;s&quot;</span>)</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>        }</span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>    }</span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a>)</span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a>people <span class="ot">&lt;-</span> <span class="fu">People</span>(</span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a>    <span class="fu">Person</span>(<span class="st">&quot;Ross&quot;</span>, <span class="st">&quot;Ihaka&quot;</span>),</span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a>    <span class="fu">Person</span>(<span class="st">&quot;Robert&quot;</span>, <span class="st">&quot;Gentleman&quot;</span>)</span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a>)</span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a>people</span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a><span class="co">#&gt; &lt;People&gt; List of 2</span></span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a><span class="co">#&gt;  $ : &lt;Person&gt;</span></span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a><span class="co">#&gt;   ..@ first_name: chr &quot;Ross&quot;</span></span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a><span class="co">#&gt;   ..@ last_name : chr &quot;Ihaka&quot;</span></span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a><span class="co">#&gt;  $ : &lt;Person&gt;</span></span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a><span class="co">#&gt;   ..@ first_name: chr &quot;Robert&quot;</span></span>
<span id="cb2-23"><a href="#cb2-23" tabindex="-1"></a><span class="co">#&gt;   ..@ last_name : chr &quot;Gentleman&quot;</span></span></code></pre></div>
<p>Now, in your Shiny app, you want to use <code>filterInput()</code> to
select a <code>Person</code> from <code>people</code>; however, if you
call <code>filterInput()</code> on <code>people</code>, you will get an
error:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">library</span>(shinyfilters)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="fu">filterInput</span>(people, <span class="at">inputId =</span> <span class="st">&quot;people&quot;</span>, <span class="at">label =</span> <span class="st">&quot;Pick a person:&quot;</span>)</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="co">#&gt; Error in as.vector(x, &quot;character&quot;): cannot coerce type &#39;closure&#39; to vector of type &#39;character&#39;</span></span></code></pre></div>
<p>To allow <code>filterInput()</code> to be called on
<code>people</code>, you can <em>extend</em>
<code>filterInput()</code>.</p>
</div>
<div id="extending-shinyfilters" class="section level1">
<h1>Extending shinyfilters</h1>
<p>Extending <code>filterInput()</code> involves two steps:</p>
<ol style="list-style-type: decimal">
<li>Define a method for <code>filterInput()</code>.</li>
<li>Define a method for <code>args_filter_input()</code></li>
</ol>
<div id="step-1-define-filterinput" class="section level2">
<h2>Step 1: Define filterInput()</h2>
<p>Defining a method for <code>filterInput()</code> involves dispatching
the provided <code>x</code> to the appropriate shiny input function.</p>
<p>In this case, we want <code>filterInput()</code> to dispatch to a
<code>shiny::selectizeInput</code> for <code>People</code>:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">method</span>(filterInput, People) <span class="ot">&lt;-</span> <span class="cf">function</span>(x, ...) {</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>    <span class="fu">call_filter_input</span>(x, shiny<span class="sc">::</span>selectizeInput, ...)</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>}</span></code></pre></div>
<p>Its recommended that methods for <code>filterInput()</code> use
<code>call_filter_input()</code>, as shown above.
<code>call_filter_input()</code> prepares the arguments for the input
function, then calls the provided input function with the prepared
arguments.</p>
<p><em>Now</em>, if we run <code>filterInput()</code> on
<code>people</code></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">filterInput</span>(people, <span class="at">inputId =</span> <span class="st">&quot;people&quot;</span>, <span class="at">label =</span> <span class="st">&quot;Pick a person:&quot;</span>)</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="co">#&gt; Error in as.vector(x, &quot;character&quot;): cannot coerce type &#39;closure&#39; to vector of type &#39;character&#39;</span></span></code></pre></div>
<p> well still get an error.</p>
<p>To fix <em>this</em> error, you need to define a method for
<code>args_filter_input()</code>.</p>
</div>
<div id="step-2-define-args_filter_input" class="section level2">
<h2>Step 2: Define args_filter_input()</h2>
<p><code>args_filter_input()</code> tells <code>filterInput()</code> how
to convert <code>x</code> into the arguments it uses for the shiny input
function.</p>
<p>To define <code>args_filter_input()</code>, write a method that
returns a named list, representing the arguments passed to the selected
input:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>full_names <span class="ot">&lt;-</span> <span class="fu">new_generic</span>(<span class="st">&quot;full_names&quot;</span>, <span class="st">&quot;x&quot;</span>)</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="fu">method</span>(full_names, People) <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">vapply</span>(x, full_names, <span class="fu">character</span>(<span class="dv">1</span>))</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="fu">method</span>(full_names, Person) <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">paste</span>(x<span class="sc">@</span>first_name, x<span class="sc">@</span>last_name)</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="fu">method</span>(args_filter_input, People) <span class="ot">&lt;-</span> <span class="cf">function</span>(x, ...) {</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>    <span class="fu">list</span>(<span class="at">choices =</span> <span class="fu">full_names</span>(x))</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>}</span></code></pre></div>
<p>Now you can call <code>filterInput()</code>:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">filterInput</span>(people, <span class="at">inputId =</span> <span class="st">&quot;people&quot;</span>, <span class="at">label =</span> <span class="st">&quot;Pick a person:&quot;</span>)</span></code></pre></div>
<div class="form-group shiny-input-container">
<label class="control-label" id="people-label" for="people">Pick a person:</label>
<div>
<select class="shiny-input-select form-control" id="people"><option value="Ross Ihaka" selected>Ross Ihaka</option>
<option value="Robert Gentleman">Robert Gentleman</option></select>
<script type="application/json" data-for="people">{"plugins":["selectize-plugin-a11y"]}</script>
</div>
</div>
</div>
</div>
<div id="overwriting-shinyfilters" class="section level1">
<h1>Overwriting shinyfilters</h1>
<p>Overwriting <code>filterInput()</code> is similar to extending
<code>filterInput()</code>, except that when you <em>overwrite</em>, you
replace an <em>existing</em> method. Use overwriting when you want to
customize existing functionality.</p>
<div id="step-1-overwrite-filterinput" class="section level2">
<h2>Step 1: Overwrite filterInput()</h2>
<p>Overwrite <code>filterInput()</code> when you want to customize the
input function that is selected.</p>
<p>For example, lets say you want to use <code>shinyWidgets</code>
instead of <code>shiny</code>:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">library</span>(shinyWidgets)</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="fu">method</span>(filterInput, class_numeric) <span class="ot">&lt;-</span> <span class="cf">function</span>(x, ...) {</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>    <span class="fu">call_filter_input</span>(x, numericRangeInput, ...)</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>}</span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="co">#&gt; Overwriting method filterInput(&lt;integer&gt;)</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a><span class="co">#&gt; Overwriting method filterInput(&lt;double&gt;)</span></span></code></pre></div>
<p>Now when you call <code>filterInput()</code> on a
<code>character</code> vector, <code>filterInput()</code> will call
<code>shinyWidgets</code> instead of <code>shiny</code>:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">filterInput</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">inputId =</span> <span class="st">&quot;number&quot;</span>, <span class="at">label =</span> <span class="st">&quot;Pick a number:&quot;</span>)</span></code></pre></div>
<div id="number" class="shiny-numeric-range-input form-group shiny-input-container">
<label class="control-label" id="number-label" for="number">Pick a number:</label>
<div class="input-numeric-range input-group">
<input type="number" class="form-control" value="10" min="0" max="10"></input>
<span class="input-group-addon input-group-text rounded-0"> to </span>
<input type="number" class="form-control" value="10" min="0" max="10"></input>
</div>
</div>
<p>However, this isnt quite right. Notice how the range shows the same
number twice. To fix this, we need to also overwrite
<code>args_filter_input()</code>.</p>
</div>
<div id="step-2-overwrite-args_filter_input" class="section level2">
<h2>Step 2: Overwrite args_filter_input()</h2>
<p>Overwrite <code>args_filter_input()</code> when you want to modify
the arguments passed to the selected input function.</p>
<p>For example, to allow numeric vectors to work with the shinyWidgets
input function, we need to pass <code>value</code> as a length-two
numeric vector:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">method</span>(args_filter_input, class_numeric) <span class="ot">&lt;-</span> <span class="cf">function</span>(x, ...) {</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>    <span class="fu">list</span>(</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>        <span class="co"># Value should be a length-two vector, per ?numericRangeInput</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>        <span class="at">value =</span> <span class="fu">c</span>(<span class="fu">min</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">max</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>    )</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>}</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a><span class="co">#&gt; Overwriting method args_filter_input(&lt;integer&gt;)</span></span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a><span class="co">#&gt; Overwriting method args_filter_input(&lt;double&gt;)</span></span></code></pre></div>
<p>Now, our overwritten <code>filterInput()</code> will work as
intended:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">filterInput</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">inputId =</span> <span class="st">&quot;number&quot;</span>, <span class="at">label =</span> <span class="st">&quot;Pick a number:&quot;</span>)</span></code></pre></div>
<div id="number" class="shiny-numeric-range-input form-group shiny-input-container">
<label class="control-label" id="number-label" for="number">Pick a number:</label>
<div class="input-numeric-range input-group">
<input type="number" class="form-control" value="0"></input>
<span class="input-group-addon input-group-text rounded-0"> to </span>
<input type="number" class="form-control" value="10"></input>
</div>
</div>
</div>
</div>
<div id="why-call_filter_input" class="section level1">
<h1>Why call_filter_input() ?</h1>
<p><code>call_filter_input()</code> exists to handle the arguments for
the provided vector and selected input function.</p>
<hr>
<p><br></p>
<p>You <em>can</em> skip the call to <code>call_filter_input()</code>,
and in doing so, you skip the call to <code>args_filter_input()</code>.
So, youd need to handle the argument preparation inside your
<code>filterInput()</code> method:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">method</span>(filterInput, People) <span class="ot">&lt;-</span> <span class="cf">function</span>(x, ...) {</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>    shiny<span class="sc">::</span><span class="fu">selectizeInput</span>(</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>        <span class="at">choices =</span> <span class="fu">full_names</span>(x),</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>        ...</span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>    )</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>}</span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a><span class="co">#&gt; Overwriting method filterInput(&lt;People&gt;)</span></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a><span class="fu">filterInput</span>(people, <span class="at">inputId =</span> <span class="st">&quot;people&quot;</span>, <span class="at">label =</span> <span class="st">&quot;Pick a person:&quot;</span>)</span></code></pre></div>
<div class="form-group shiny-input-container">
<label class="control-label" id="people-label" for="people">Pick a person:</label>
<div>
<select class="shiny-input-select form-control" id="people"><option value="Ross Ihaka" selected>Ross Ihaka</option>
<option value="Robert Gentleman">Robert Gentleman</option></select>
<script type="application/json" data-for="people">{"plugins":["selectize-plugin-a11y"]}</script>
</div>
</div>
<p><br></p>
<p>However, such an implementation is more bug-prone, and, increases the
opportunity for confusing errors to emerge:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">filterInput</span>(</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>    people,</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>    <span class="at">inputId =</span> <span class="st">&quot;people&quot;</span>,</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">&quot;Pick a person:&quot;</span>,</span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>    <span class="at">choices =</span> <span class="fu">full_names</span>(people)</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>)</span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="co">#&gt; Error in selectInput(inputId, ..., selectize = FALSE, width = width): formal argument &quot;choices&quot; matched by multiple actual arguments</span></span></code></pre></div>
<blockquote>
<p>Error in  : formal argument choices matched by multiple actual
arguments</p>
</blockquote>
<p><em>But I only provided <code>choices</code> once!</em></p>
<p><br></p>
<p>Additionally, the user of your extension may themselves be extending
<code>args_filter_input()</code> only, and not
<code>filterInput()</code>. In such cases, they generally would expect
<code>call_filter_input()</code> to be called, so that <em>their</em>
extension of <code>args_filter_input()</code> would be picked up by
<em>your</em> extension of <code>filterInput()</code>.</p>
<br>
<hr>
<p>For the best user experience, you should handle arguments in your
extension. <code>call_filter_input()</code> exists for this purpose,
handling the argument prep dynamically (via
<code>args_filter_input()</code>) and sending informative errors:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">method</span>(filterInput, People) <span class="ot">&lt;-</span> <span class="cf">function</span>(x, ...) {</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>    <span class="fu">call_filter_input</span>(x, shiny<span class="sc">::</span>selectizeInput, ...)</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>}</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="co">#&gt; Overwriting method filterInput(&lt;People&gt;)</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="fu">filterInput</span>(</span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a>    people,</span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a>    <span class="at">inputId =</span> <span class="st">&quot;people&quot;</span>,</span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">&quot;Pick a person:&quot;</span>,</span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a>    <span class="at">choices =</span> <span class="fu">full_names</span>(people)</span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a>)</span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a><span class="co">#&gt; Error in error_input_args(x, names(args)): The argument `choices` is not supported in when used with `People` objects.</span></span></code></pre></div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
